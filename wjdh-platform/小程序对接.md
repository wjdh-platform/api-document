<!-- TOC -->

- [小程序接口文档](#小程序接口文档)
  - [接口编纂者](#接口编纂者)
    - [1-yangzhe杨哲(tonyhappystyle@163.com)](#1-yangzhe杨哲tonyhappystyle163com)
- [前言：各种一标三实数据对应号码](#前言各种一标三实数据对应号码)
- [1授权](#1授权)
  - [1.1获取手机验证码](#11获取手机验证码)
    - [1.1.1携带数据](#111携带数据)
    - [1.1.2返回数据](#112返回数据)
    - [1.1.3结果示例](#113结果示例)
    - [1.1.4接口附录](#114接口附录)
  - [1.2注册](#12注册)
    - [1.2.1手机号注册](#121手机号注册)
      - [1.2.1.1携带数据](#1211携带数据)
      - [1.2.1.2返回数据](#1212返回数据)
      - [1.2.1.3结果示例](#1213结果示例)
  - [1.3登录](#13登录)
    - [1.3.1手机号验证码登录](#131手机号验证码登录)
      - [1.3.1.1携带数据](#1311携带数据)
      - [1.3.1.2返回数据](#1312返回数据)
      - [1.3.1.3结果示例](#1313结果示例)
    - [1.3.2帐号密码登录](#132帐号密码登录)
      - [1.3.2.1携带数据](#1321携带数据)
      - [1.3.2.2返回数据](#1322返回数据)
      - [1.3.2.3结果示例](#1323结果示例)
  - [1.4获取token](#14获取token)
    - [1.4.1发送code值到后台获取token](#141发送code值到后台获取token)
      - [1.4.1.1头部信息](#1411头部信息)
      - [1.4.1.2返回数据](#1412返回数据)
      - [1.4.1.3结果示例](#1413结果示例)
    - [1.5发送旧token值到后台获取新token](#15发送旧token值到后台获取新token)
      - [1.5.1.1头部信息](#1511头部信息)
      - [1.5.1.2返回数据](#1512返回数据)
      - [1.5.2.3结果示例](#1523结果示例)
- [2一标三实录入](#2一标三实录入)
  - [2.1获得基础数据](#21获得基础数据)
    - [2.1.1获得小区](#211获得小区)
      - [2.1.1.1头部信息](#2111头部信息)
      - [2.1.1.2返回数据](#2112返回数据)
      - [2.1.1.3结果示例](#2113结果示例)
      - [2.1.1.4接口附录](#2114接口附录)
    - [2.1.2获得楼栋](#212获得楼栋)
      - [2.1.2.1头部信息](#2121头部信息)
      - [2.1.2.2返回数据](#2122返回数据)
      - [2.1.2.3结果示例](#2123结果示例)
      - [2.1.2.4接口附录](#2124接口附录)
    - [2.1.3获得单元](#213获得单元)
      - [2.1.3.1头部信息](#2131头部信息)
      - [2.1.3.2返回数据](#2132返回数据)
      - [2.1.3.3结果示例](#2133结果示例)
      - [2.1.3.4接口附录](#2134接口附录)
    - [2.1.4获得楼层](#214获得楼层)
      - [2.1.4.1头部信息](#2141头部信息)
      - [2.1.4.2返回数据](#2142返回数据)
      - [2.1.4.3结果示例](#2143结果示例)
      - [2.1.4.4接口附录](#2144接口附录)
    - [2.1.5获得房屋](#215获得房屋)
      - [2.1.5.1头部信息](#2151头部信息)
      - [2.1.5.2返回数据](#2152返回数据)
      - [2.1.5.3结果示例](#2153结果示例)
      - [2.1.5.4接口附录](#2154接口附录)
  - [2.2查询安防数据库数据](#22查询安防数据库数据)
    - [2.2.1验证手机号是否已经绑定一标三实](#221验证手机号是否已经绑定一标三实)
      - [2.2.1.1头部信息](#2211头部信息)
      - [2.2.1.2携带数据](#2212携带数据)
      - [2.2.1.3返回数据](#2213返回数据)
      - [2.2.1.4结果示例](#2214结果示例)
    - [2.2.2查询某房间是否绑定业主，如果绑定返回业主信息](#222查询某房间是否绑定业主如果绑定返回业主信息)
      - [2.2.2.1头部信息](#2221头部信息)
      - [2.2.2.2携带数据](#2222携带数据)
      - [2.2.2.3返回数据](#2223返回数据)
      - [2.2.2.4结果示例](#2224结果示例)
    - [2.2.3校验业主手机号是否正确](#223校验业主手机号是否正确)
      - [2.2.3.1头部信息](#2231头部信息)
      - [2.2.3.2携带数据](#2232携带数据)
      - [2.2.3.3返回数据](#2233返回数据)
      - [2.2.3.4结果示例](#2234结果示例)
  - [2.3附件上传](#23附件上传)
    - [2.3.1人脸照片上传](#231人脸照片上传)
      - [2.3.1.1头部信息](#2311头部信息)
      - [2.3.1.2携带数据](#2312携带数据)
      - [2.3.1.3返回数据](#2313返回数据)
      - [2.3.1.4结果示例](#2314结果示例)
    - [2.3.2身份证验证](#232身份证验证)
      - [2.3.2.1头部信息](#2321头部信息)
      - [2.3.2.2携带数据](#2322携带数据)
      - [2.3.2.3返回数据](#2323返回数据)
      - [2.3.2.4结果示例](#2324结果示例)
  - [2.4表单提交](#24表单提交)
    - [2.4.1第一次录入一标三实表单](#241第一次录入一标三实表单)
      - [2.4.1.1头部信息](#2411头部信息)
      - [2.4.1.2携带数据](#2412携带数据)
      - [2.4.1.3返回数据](#2413返回数据)
      - [2.4.1.4结果示例](#2414结果示例)
    - [2.4.2绑定更多房屋](#242绑定更多房屋)
      - [2.4.2.1头部信息](#2421头部信息)
      - [2.4.2.2携带数据](#2422携带数据)
      - [2.4.2.3返回数据](#2423返回数据)
      - [2.4.2.4结果示例](#2424结果示例)
- [3列表页面](#3列表页面)
  - [3.1用户相关数据列表](#31用户相关数据列表)
    - [3.1.1绑定房屋列表](#311绑定房屋列表)
      - [3.1.1.1头部信息](#3111头部信息)
      - [3.1.1.2返回数据](#3112返回数据)
      - [3.1.1.3结果示例](#3113结果示例)
    - [3.1.2房屋详情页](#312房屋详情页)
      - [3.1.2.1头部信息](#3121头部信息)
      - [3.1.2.2携带数据](#3122携带数据)
      - [3.1.2.3返回数据](#3123返回数据)
      - [3.1.2.4结果示例](#3124结果示例)

<!-- /TOC -->
# 小程序接口文档

## 接口编纂者

### 1-yangzhe杨哲(tonyhappystyle@163.com)

---

# 前言：各种一标三实数据对应号码

- 居民角色：
  
编号|名称|补充
|:--|:--|:--
0|家属|为防止物业端搞不清楚亲属的具体身份而设置，一般情况下不建议填写0
1|本人|业主本人
2|租客|所有非业主亲属的都是租客（包括租客的家人）
3|丈夫|
4|妻子|
5|父亲|
6|母亲|
7|爷爷|
8|奶奶|
9|姥爷|
10|姥姥|
11|儿子|
12|女儿|
13|其他|连是不是亲属、是不是租客都搞不清楚，那只能选其他了

- 房屋用途:
  
编号|名称|补充
|:--|:--|:--
1|住宅|
2|生产|
3|经营（商业）（饭店）|
4|仓储|
5|教育（医疗、卫生、科研）|
6|文化(娱乐、体育)|
7|办公|
8|商业（金融）（信息）|
9|其他|

- 房屋性质:
  
编号|名称|补充
|:--|:--|:--
1|私有|
2|公有|
3|其他|

- 房屋现状:
  
编号|名称|补充
|:--|:--|:--
1|自用|
2|闲置|
3|借用|
4|空挂|
5|租用|
6|拆迁|
7|其他|

- 住户类型:
  
编号|名称|补充
|:--|:--|:--
1|业主|
2|租户|
3|其他|

- 小程序用户

编号|名称|补充
|:--|:--|:--
NewMember|小程序用户（未激活一标三实）|
HouseMember|小程序用户（已激活一标三实）|

- 审核状态

编号|名称|补充
|:--|:--|:--
0|未通过审核|
1|已通过审核|
2|待审核|

# 1授权

## 1.1获取手机验证码

>说明:发送手机号和申请类型获得验证码

>请求方法：POST

>url地址：<https://tc.mg.cool/api/v1/verificationCodes/phone>

### 1.1.1携带数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
phone|integer|必填|手机号
type|string|必填|验证码类型|见附录
community_house_name|string|非必填|小区+楼栋+单元+楼层+房屋的名称|type="yezhu"时传送

### 1.1.2返回数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
code|integer|必填|处理结果|0成功，1出错
msg|string|必填|描述返回结果|
key|string|必填|验证码缓存键值（在其他接口中使用）
expired_at|string|必填|过期时间，默认5分钟

### 1.1.3结果示例

``` json
1.成功，返回验证码缓存键值，并且后台发送验证码
{
    "code": "0",
    "msg": "验证码获取成功,5分钟内有效",
    "key": "verificationCode_qaFUTv8034G29I5",
    "expired_at": "2020-11-19 13:34:38"
}

```

```  json
2.失败，参数不正确
{
    "code": "1",
    "msg": "服务器开小差，请重试",
    "phone": "1761049113",
    "message": "必须是正确的手机号"
}
{
    "code": "1",
    "msg": "服务器开小差，请重试",
    "phone": "17610491130",
    "message": "type参数必须是login、register、verify等"
}
```

``` json
3.失败，register类型下，手机号已注册
{
    "code": "1",
    "msg": "该手机号已注册，请直接登录",
    "phone": "17610493577",
    "message": "手机号已存在"
}
```

``` json
4.失败，login类型下，手机号未注册
{
    "code": "1",
    "msg": "该手机号未注册",
    "phone": "18600381130",
    "message": "该手机号未注册"
}
```

### 1.1.4接口附录

- type

字段|释义|补充
|:--|:--|:--
register|注册
login|登录
verify|验证|仅验证手机号是否可用
yezhu|业主|比其他验证码存留时间更长，默认30分钟

---
---
---

## 1.2注册

### 1.2.1手机号注册

>说明:该方法适用于之前从未拥有万家灯火平台帐号的用户

>请求方法：POST

>url地址：<https://tc.mg.cool/api/v1/weapp/users>

#### 1.2.1.1携带数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
verification_key|string|必填|手机号验证码seesion缓存key值
verification_code|integer|必填|验证码
password|string|必填|密码
code|string|必填|微信用户code码
name|string|必填|微信用户昵称
avatar|string|必填|微信用户头像

#### 1.2.1.2返回数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
code|integer|必填|处理结果|0成功，1出错
token_expired|integer|必填|是否过期|0过期，1未过期
msg|string|必填|描述返回结果|
access_token|string|必填|token值
expired_in|string|必填|过期时间，默认3600秒
roles|array|必填|角色，见前言
name|string|必填|用户微信昵称
avatar|string|必填|头像url

#### 1.2.1.3结果示例

``` json
1.成功，返回用户角色、token值、过期时间等用户
{
    "code": "0",
    "token_expired": "1",
    "msg": "保持登录状态",
    "access_token": "eyJ0eXAiO",
    "token_type": "Bearer",
    "expires_in": 3600,
    "roles": [
        "NewMember"
    ],
    "name": "yangzhe",
    "avatar": "avatar"
}

```

```  json
2.失败，参数不正确
{
    "code": "1",
    "msg": "服务器开小差，请重试",
    "message": "用户的name值未传送"
}
```

``` json
3.失败，验证码已失效
{
    "code": "1",
    "msg": "验证码已失效",
    "message": "验证码已失效"
}
```

---

---

---

## 1.3登录

### 1.3.1手机号验证码登录

>说明:登录的方法之一

>请求方法：POST

>url地址：<https://tc.mg.cool/api/v1/weapp/athorizations/phone>

#### 1.3.1.1携带数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
verification_key|string|必填|手机号验证码seesion缓存key值
verification_code|integer|必填|验证码
password|string|必填|密码
code|string|必填|微信用户code码

#### 1.3.1.2返回数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
code|integer|必填|处理结果|0成功，1出错
token_expired|integer|必填|是否过期|0过期，1未过期
msg|string|必填|描述返回结果|
access_token|string|必填|token值
expired_in|string|必填|过期时间，默认3600秒
roles|array|必填|角色，见前言
name|string|必填|用户微信昵称
avatar|string|必填|头像url

#### 1.3.1.3结果示例

``` json
1.成功，返回用户角色、token值、过期时间等用户
{
    "code": "0",
    "token_expired": "1",
    "msg": "token值等用户数据获取成功",
    "access_token": "eyJ0eXAiO",
    "token_type": "Bearer",
    "expires_in": 3600,
    "roles": [
        "NewMember"
    ],
    "name": "yangzhe",
    "avatar": "avatar"
}

```

```  json
2.失败，参数不正确
{
    "code": "1",
    "msg": "服务器开小差，请重试",
    "message": "小程序code不正确，请传递新code值"
}
```

``` json
3.失败，验证码已失效
{
    "code": "1",
    "msg": "验证码已失效",
    "message": "验证码已失效"
}
```

---

### 1.3.2帐号密码登录

>说明:登录的方法之一

>请求方法：POST

>url地址：<https://tc.mg.cool/api/v1/weapp/authorizations>

#### 1.3.2.1携带数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
username|string|必填|用户帐号|目前是手机号作为账号，未来还可以绑定邮箱作为账号
password|string|必填|密码
code|string|必填|微信用户code码

#### 1.3.2.2返回数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
code|integer|必填|处理结果|0成功，1出错
token_expired|integer|必填|是否过期|0过期，1未过期
msg|string|必填|描述返回结果|
access_token|string|必填|token值
expired_in|string|必填|过期时间，默认3600秒
roles|array|必填|角色，见前言
name|string|必填|用户微信昵称
avatar|string|必填|头像url

#### 1.3.2.3结果示例

``` json
1.成功，返回用户角色、token值、过期时间等用户
{
    "code": "0",
    "token_expired": "1",
    "msg": "token值等用户数据获取成功",
    "access_token": "eyJ0eXAiO",
    "token_type": "Bearer",
    "expires_in": 3600,
    "roles": [
        "NewMember"
    ],
    "name": "yangzhe",
    "avatar": "avatar"
}

```

```  json
2.失败，参数不正确
{
    "code": "1",
    "msg": "服务器开小差，请重试",
    "message": "小程序code不正确，请传递新code值"
}
```

``` json
3.失败，验证码已失效
{
    "code": "1",
    "msg": "验证码已失效",
    "message": "验证码已失效"
}
```

``` json
4.失败，验证码已失效
{
    "code": "1",
    "msg": "验证码已失效",
    "message": "验证码已失效"
}
```

---
---
---

## 1.4获取token

### 1.4.1发送code值到后台获取token

>说明:在以下情景里面会使用到该接口

情景|目的|返回情况|补充
|:--|:--|:--|:--
注册用户无缓存状态进入小程序|查找该微信用户是否已注册|返回用户注册数据|详见下方返回示例
未注册用户无缓存状态进入小程序|查找该微信用户是否已注册|提示未注册|详见下方返回示例

>请求方法：POST

>url地址：<https://tc.mg.cool/api/v1/weapp/authorizations>

#### 1.4.1.1头部信息

> Authorization: Bearer token值

#### 1.4.1.2返回数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
code|integer|必填|处理结果|0成功，1出错
token_expired|integer|必填|是否过期|0过期，1未过期
msg|string|必填|描述返回结果|
access_token|string|必填|token值
expired_in|string|必填|过期时间，默认3600秒
roles|array|必填|角色，见前言
name|string|选填|(暂时为空值，以后会研究如何取到name值)用户微信昵称
avatar|string|选填|头像url

#### 1.4.1.3结果示例

``` json
1.成功，返回用户角色、token值、过期时间等用户
{
    "code": "0",
    "access_token": "eyJ0eXAiOi",
    "msg": "token值等用户数据获取成功",
    "token_type": "Bearer",
    "expires_in": 3600,
    "roles": [
        "NewMember"
    ],
    "name": "yangzhe",
    "avatar": "avatar"
}

```

```  json
2.失败，参数不正确
{
    "code": "1",
    "msg": "服务器开小差，请重试",
    "message": "小程序code不正确，请传递新code值"
}
```

``` json
3.失败，该用户只是个游客，未注册
{
    "code": "1",
    "msg": "服务器开小差，请重试",
    "message": "这只是个游客"
}
```

---
---
---

### 1.5发送旧token值到后台获取新token

>说明:在以下情景里面会使用到该接口

情景|目的|返回情况|补充
|:--|:--|:--|:--
缓存中的token超过了过期时间|换取新token|返回新token和用户注册数据|详见“关于小程序对接的问题库”

>请求方法：PUT

>url地址：<https://tc.mg.cool/api/v1/authorizations/current>

#### 1.5.1.1头部信息

> Authorization: Bearer token值

#### 1.5.1.2返回数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
code|integer|必填|处理结果|0成功，1出错
token_expired|integer|必填|是否过期|0过期，1未过期
msg|string|必填|描述返回结果|
access_token|string|必填|token值
expired_in|string|必填|过期时间，默认3600秒
roles|array|必填|角色，见前言
name|string|必填|用户微信昵称
avatar|string|必填|头像url

#### 1.5.2.3结果示例

``` json
1.成功，返回用户角色、token值、过期时间等用户
{
    "code": "0",
    "access_token": "eyJ0eXAiOi",
    "msg": "token值等用户数据获取成功",
    "token_type": "Bearer",
    "expires_in": 3600,
    "roles": [
        "NewMember"
    ],
    "name": "yangzhe",
    "avatar": "avatar"
}

```

```  json
2.失败，参数不正确
{
    "code": "1",
    "msg": "服务器开小差，请重试",
    "message": "小程序code不正确，请传递新code值"
}
```

``` json
3.失败，token值已经超过了14天更新时间，已经在后台缓存中移除，此时应该使用code换取token（详见本文档1.4.1）
{
    "code": "1",
    "msg": "服务器开小差，请重试",
    "message": "刷新token值失败,message编码Au335"
}
```

---
---
---

# 2一标三实录入

## 2.1获得基础数据

### 2.1.1获得小区

>说明:获得小区的数据列表

>请求方法：POST

>url地址：<https://tc.mg.cool/api/v1/communities>

#### 2.1.1.1头部信息

> Authorization: Bearer token值

#### 2.1.1.2返回数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
code|integer|必填|处理结果|0成功，1出错
token_expired|integer|必填|token值是否过期|0过期，1未过期
msg|string|必填|描述返回结果|
message|string|必填|调试信息|
data|array|必填|见附录

#### 2.1.1.3结果示例

``` json
1.成功，返回小区列表数据
{
    "code": 1,
    "token_expired": "1",
    "msg": "获取到了小区",
    "message": "获取到了小区",
    "data": [
        {
            "id": 1,
            "city_id": null,
            "community_name": "晨曦家园",
            "community_identifier": "1",
            "community_pinyin": "ChenXiJiaYuan",
            "community_type": 0,
            "community_order": 0,
            "community_value1": null,
            "community_value2": null,
            "community_value3": null,
            "deleted_at": null
        },
        {
            "id": 2,
            "city_id": null,
            "community_name": "交运里",
            "community_identifier": "2",
            "community_pinyin": "JiaoYunLi",
            "community_type": 0,
            "community_order": 0,
            "community_value1": null,
            "community_value2": null,
            "community_value3": null,
            "deleted_at": null
        }
    ]
}

```

```  json
2.失败，未登录用户或token值超过1小时过期（理论上不应该出现token值过期的返回，因为过期时，应该先由小程序判断超过1小时过期，调取“刷新token”的接口，再携带新的token值（如果超过14天更新期限，则只能使用“code值获取token接口”重置token状态），来调取其他接口的数据。但实际当中，可能会出现意外情况，如还未到1小时，但服务器端缓存意外丢失，导致token值失效。）
{
    "code": "0",
    "token_expired": "0",
    "msg": "请重新建立智慧平台鉴权连接",
    "message": "token值因各种原因而失效，请重新调用接口获取token"
}
```

#### 2.1.1.4接口附录

- data

``` json
        {
            "id": 1,
            "city_id": null,
            "community_name": "晨曦家园",
            "community_identifier": "1",
            "community_pinyin": "ChenXiJiaYuan",
            "community_type": 0,
            "community_order": 0,
            "community_value1": null,
            "community_value2": null,
            "community_value3": null,
            "deleted_at": null
        }
```

字段|类型|释义|选项
|:--|:--|:--|:--
id|integer|社区表主键id|对本接口无用
community_name|string|小区名称|
community_identifier|integer|社区唯一标识|作为调取楼栋时使用的id值传入
community_type|integer|小区类型|对本接口无用
community_order|integer|小区展示顺序|2020年11月20日由于小区数量过少，暂未涉及

---

### 2.1.2获得楼栋

>说明:获得某小区的楼栋数据列表

>请求方法：POST

>url地址：<https://tc.mg.cool/api/v1/buildings>

#### 2.1.2.1头部信息

> Authorization: Bearer token值

#### 2.1.2.2返回数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
code|integer|必填|处理结果|0成功，1出错
token_expired|integer|必填|token值是否过期|0过期，1未过期
msg|string|必填|描述返回结果|
message|string|必填|调试信息|
data|array|必填|见附录

#### 2.1.2.3结果示例

``` json
1.成功，返回楼栋列表数据
{
    "code": 1,
    "token_expired": "1",
    "msg": "获取到了楼栋",
    "message": "获取到了楼栋",
    "data": [
        {
            "id": 1,
            "community_identifier": 1,
            "building_number": 1,
            "building_name": "1栋",
            "deleted_at": null
        },
        {
            "id": 2,
            "community_identifier": 1,
            "building_number": 10,
            "building_name": "10栋",
            "deleted_at": null
        },
    ]
}

```

```  json
2.失败，未登录用户或token值超过1小时过期（理论上不应该出现token值过期的返回，因为过期时，应该先由小程序判断超过1小时过期，调取“刷新token”的接口，再携带新的token值（如果超过14天更新期限，则只能使用“code值获取token接口”重置token状态），来调取其他接口的数据。但实际当中，可能会出现意外情况，如还未到1小时，但服务器端缓存意外丢失，导致token值失效。）
{
    "code": "0",
    "token_expired": "0",
    "msg": "请重新建立智慧平台鉴权连接",
    "message": "token值因各种原因而失效，请重新调用接口获取token"
}
```

#### 2.1.2.4接口附录

- data

``` json
    {
        "id": 1,
        "community_identifier": 1,
        "building_number": 1,
        "building_name": "1栋",
        "deleted_at": null
    }
```

字段|类型|释义|补充
|:--|:--|:--|:--
id|integer|楼栋表主键id|作为调取单元时使用的id值传入
building_name|string|楼栋名称|
building_number|integer|某社区下的楼栋唯一标识|对本接口无用
community_identifier|integer|社区唯一标识|对本接口无用
deleted_at|string|软删除时间|对本接口无用

---

### 2.1.3获得单元

>说明:获得某楼栋的单元数据列表

>请求方法：POST

>url地址：<https://tc.mg.cool/api/v1/units>

#### 2.1.3.1头部信息

> Authorization: Bearer token值

#### 2.1.3.2返回数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
code|integer|必填|处理结果|0成功，1出错
token_expired|integer|必填|token值是否过期|0过期，1未过期
msg|string|必填|描述返回结果|
message|string|必填|调试信息|
data|array|必填|见附录

#### 2.1.3.3结果示例

``` json
1.成功，返回楼栋列表数据
{
    "code": 1,
    "token_expired": "1",
    "msg": "获取到了楼栋",
    "message": "获取到了楼栋",
    "data": [
        {
            "id": 1,
            "building_id": 1,
            "community_identifier": 1,
            "unit_number": 1,
            "unit_name": "1单元",
            "deleted_at": null
        },
        {
            "id": 2,
            "building_id": 1,
            "community_identifier": 1,
            "unit_number": 2,
            "unit_name": "2单元",
            "deleted_at": null
        },
    ]
}

```

```  json
2.失败，未登录用户或token值超过1小时过期（理论上不应该出现token值过期的返回，因为过期时，应该先由小程序判断超过1小时过期，调取“刷新token”的接口，再携带新的token值（如果超过14天更新期限，则只能使用“code值获取token接口”重置token状态），来调取其他接口的数据。但实际当中，可能会出现意外情况，如还未到1小时，但服务器端缓存意外丢失，导致token值失效。）
{
    "code": "0",
    "token_expired": "0",
    "msg": "请重新建立智慧平台鉴权连接",
    "message": "token值因各种原因而失效，请重新调用接口获取token"
}
```

#### 2.1.3.4接口附录

- data

``` json
    {
            "id": 1,
            "building_id": 1,
            "community_identifier": 1,
            "unit_number": 1,
            "unit_name": "1单元",
            "deleted_at": null
    }
```

字段|类型|释义|补充
|:--|:--|:--|:--
id|integer|楼栋表主键id|作为调取楼层时使用的id值传入
building_id|string|所属楼栋表id|对本接口无用
unit_number|integer|某楼栋下的单元唯一标识|对本接口无用
unit_name|string|单元名称|
community_identifier|integer|社区唯一标识|对本接口无用
deleted_at|string|软删除时间|对本接口无用

### 2.1.4获得楼层

>说明:获得某单元的楼层数据列表

>请求方法：POST

>url地址：<https://tc.mg.cool/api/v1/floors>

#### 2.1.4.1头部信息

> Authorization: Bearer token值

#### 2.1.4.2返回数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
code|integer|必填|处理结果|0成功，1出错
token_expired|integer|必填|token值是否过期|0过期，1未过期
msg|string|必填|描述返回结果|
message|string|必填|调试信息|
data|array|必填|见附录

#### 2.1.4.3结果示例

``` json
1.成功，返回楼栋列表数据
{
            "id": 1,
            "unit_id": 1,
            "community_identifier": 1,
            "floor_number": 1,
            "floor_name": "1楼",
            "deleted_at": null
        },
        {
            "id": 2,
            "unit_id": 1,
            "community_identifier": 1,
            "floor_number": 2,
            "floor_name": "2楼",
            "deleted_at": null
        }
}
```

```  json
2.失败，未登录用户或token值超过1小时过期（理论上不应该出现token值过期的返回，因为过期时，应该先由小程序判断超过1小时过期，调取“刷新token”的接口，再携带新的token值（如果超过14天更新期限，则只能使用“code值获取token接口”重置token状态），来调取其他接口的数据。但实际当中，可能会出现意外情况，如还未到1小时，但服务器端缓存意外丢失，导致token值失效。）
{
    "code": "0",
    "token_expired": "0",
    "msg": "请重新建立智慧平台鉴权连接",
    "message": "token值因各种原因而失效，请重新调用接口获取token"
}
```

#### 2.1.4.4接口附录

- data

``` json
    {
            "id": 1,
            "unit_id": 1,
            "community_identifier": 1,
            "floor_number": 1,
            "floor_name": "1楼",
            "deleted_at": null
    }
```

字段|类型|释义|补充
|:--|:--|:--|:--
id|integer|楼栋表主键id|作为调取房间时使用的id值传入
unit_id|string|所属单元表id|对本接口无用
floor_number|integer|某单元下的楼层唯一标识|对本接口无用
floor_name|string|单元名称|
community_identifier|integer|社区唯一标识|对本接口无用
deleted_at|string|软删除时间|对本接口无用

---

### 2.1.5获得房屋

>说明:获得某单元的楼层数据列表

>请求方法：POST

>url地址：<https://tc.mg.cool/api/v1/houses>

#### 2.1.5.1头部信息

> Authorization: Bearer token值

#### 2.1.5.2返回数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
code|integer|必填|处理结果|0成功，1出错
token_expired|integer|必填|token值是否过期|0过期，1未过期
msg|string|必填|描述返回结果|
message|string|必填|调试信息|
data|array|必填|见附录

#### 2.1.5.3结果示例

``` json
1.成功，返回楼栋列表数据
        {
            "id": 1,
            "floor_id": 1,
            "community_identifier": 1,
            "house_number": 101,
            "house_name": "101号",
            "house_type": 1,
            "house_value1": null,
            "house_value2": null,
            "house_value3": null,
            "deleted_at": null
        },
        {
            "id": 2,
            "floor_id": 1,
            "community_identifier": 1,
            "house_number": 102,
            "house_name": "102号",
            "house_type": 1,
            "house_value1": null,
            "house_value2": null,
            "house_value3": null,
            "deleted_at": null
        }
}
```

```  json
2.失败，未登录用户或token值超过1小时过期（理论上不应该出现token值过期的返回，因为过期时，应该先由小程序判断超过1小时过期，调取“刷新token”的接口，再携带新的token值（如果超过14天更新期限，则只能使用“code值获取token接口”重置token状态），来调取其他接口的数据。但实际当中，可能会出现意外情况，如还未到1小时，但服务器端缓存意外丢失，导致token值失效。）
{
    "code": "0",
    "token_expired": "0",
    "msg": "请重新建立智慧平台鉴权连接",
    "message": "token值因各种原因而失效，请重新调用接口获取token"
}
```

#### 2.1.5.4接口附录

- data

``` json
    {
            "id": 2,
            "floor_id": 1,
            "community_identifier": 1,
            "house_number": 102,
            "house_name": "102号",
            "house_type": 1,
            "house_value1": null,
            "house_value2": null,
            "house_value3": null,
            "deleted_at": null
        }
```

字段|类型|释义|补充
|:--|:--|:--|:--
id|integer|房屋表主键id|作为调取房屋业主信息的id值传入
floor_id|integer|所属楼层表id|对本接口无用
house_number|integer|某楼层下的房屋唯一标识|对本接口无用
house_name|string|房屋名称|
house_type|integer|房屋类型|见前言
community_identifier|integer|社区唯一标识|对本接口无用
deleted_at|string|软删除时间|对本接口无用

---
---
---

## 2.2查询安防数据库数据

### 2.2.1验证手机号是否已经绑定一标三实

>说明:该接口在用户第一次进入一标三实表单填写界面时，填写手机号+验证码后调用

>请求方法：POST

>url地址：<https://tc.mg.cool/api/v1/security/phone>

#### 2.2.1.1头部信息

> Authorization: Bearer token值

#### 2.2.1.2携带数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
verification_key|string|必填|验证码的缓存key值|详见本文档的接口1.1
verification_code|integer|必填|验证码|

#### 2.2.1.3返回数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
code|integer|必填|处理结果|0成功，1出错
msg|string|必填|描述返回结果|
message|string|必填|调试信息|

#### 2.2.1.4结果示例

``` json
1.成功，将通过手机号查找到的安防平台数据保存到了万家灯火数据库，跳转到列表页。
{
    "code": 0,
    "msg": "已自动绑定您的一标三实信息",
    "message": "在安防平台查找到了数据"
}
```

``` json
2.成功，安防平台查找到了数据，但该用户已经录入个人信息，无需再再次录入个人信息,因此直接跳转到列表页（即people表中已经保存过，理论上不会出现该结果，因为后面我们将设计，在前端可以通过用户的HouseMember身份，来阻止用户使用该接口，即不会再弹出填写手机号的弹窗）
{
    "code": "0",
    "message":"保存到people数据库的操作出错，已经全部回滚，请和万家灯火技术人员核对问题所在（message编码Yi673）",
    "msg":"已绑定个人信息，无需二次录入",
    "token_expired":"1"
}
```

```  json
3.成功，但未查找到该房间的业主，可以让填表用户继续填写，流程正常运转
{
    "code": "2",
    "token_expired": "1",
    "msg": "该手机号还未绑定业主",
    "message": "安防平台没有查找到该手机号绑定的数据,message编码Yi658-message编码SeApi57"
}
```

```json
4.失败，安防平台接口出现故障
{
    "code": "1",
    "token_expired": "1",
    "msg": "系统开小差，请重试或联系工作人员",
    "message": "安防平台接口出现故障，请检查配置信息如安防平台url，message编码Yi652-message编码SeApi55"
}
```

```json
5.失败，万家灯火平台调取接口代码出现问题
{
    "code": "1",
    "token_expired": "1",
    "msg": "系统开小差，请重试或联系工作人员",
    "message": "万家灯火平台调用接口出现错误,message编码Yi664-message编码SeApi59"
}
```

```json
6.失败，验证码失效
{
    "code": "1",
    "token_expired": "1",
    "msg": "验证码已失效",
    "message": "验证码已失效"
}
```

---

### 2.2.2查询某房间是否绑定业主，如果绑定返回业主信息

>说明:该接口在填表人选择选择房屋后调用，如果返回数据，暂时保存在缓存中。只有当业主手机号验证通过后（见本文档2.2.3接口），才可以显示该接口返回的数据。

>请求方法：POST

>url地址：<https://tc.mg.cool/api/v1/security/yezhu>

#### 2.2.2.1头部信息

> Authorization: Bearer token值

#### 2.2.2.2携带数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
id|integer|必填|房屋id|

#### 2.2.2.3返回数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
code|integer|必填|处理结果|0成功，1出错
msg|string|必填|描述返回结果|
message|string|必填|调试信息|
data|array|必填|业主信息

#### 2.2.2.4结果示例

``` json
1.成功，返回该房屋业主信息
{
    "code": "0",
    "token_expired": "1",
    "msg": "已获取房屋业主手机号码",
    "data": {
        "people_phone": "17600381130",
        "people_house_use": "1",
        "people_house_xingzhi": "1",
        "people_house_status": "1",
        "people_house_role": "1",
        "phone": "176****1130"
    },
    "message": "获得了手机号码，还获得了该房屋的基本信息值，一旦业主提供的验证码核实通过，就展现给用户查看"
}
```

```  json
2.失败，未查找到该房间的业主，可以让填表用户继续填写
{
    "code": "1",
    "token_expired": "1",
    "msg": "该手机号还未绑定业主",
    "message": "安防平台没有查找到该手机号绑定的数据,message编码Yi658-message编码SeApi57"
}
```

```json
3.失败，安防平台接口出现故障
{
    "code": "1",
    "token_expired": "1",
    "msg": "系统开小差，请重试或联系工作人员",
    "message": "安防平台接口出现故障，请检查配置信息如安防平台url，message编码Yi652-message编码SeApi55"
}
```

```json
4.失败，万家灯火平台调取接口代码出现问题
{
    "code": "1",
    "token_expired": "1",
    "msg": "系统开小差，请重试或联系工作人员",
    "message": "万家灯火平台调用接口出现错误,message编码Yi664-message编码SeApi59"
}
```

```json
5.失败，token值超过1小时过期（理论上不应该出现token值过期的返回，因为过期时，应该先由小程序判断超过1小时过期，调取“刷新token”的接口，再携带新的token值（如果超过14天更新期限，则只能使用“code值获取token接口”重置token状态），来调取其他接口的数据。但实际当中，可能会出现意外情况，如还未到1小时，但服务器端缓存意外丢失，导致token值失效。）
{
    "code": "0",
    "token_expired": "0",
    "msg": "请重新建立智慧平台鉴权连接",
    "message": "token值因各种原因而失效，请重新调用接口获取token"
}
```

---

### 2.2.3校验业主手机号是否正确

>说明:该接口在填表人选择选择房屋后调用，如果返回数据，暂时保存在缓存中。只有当业主手机号验证通过后（见本文档2.2.3接口），才可以显示该接口返回的数据。

>请求方法：POST

>url地址：<https://tc.mg.cool/api/v1/security/yezhu-code>

#### 2.2.3.1头部信息

> Authorization: Bearer token值

#### 2.2.3.2携带数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
verification_key|string|必填|验证码缓存键值|
verification_code|string|必填|验证码|

#### 2.2.3.3返回数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
code|integer|必填|处理结果|0成功，1出错
msg|string|必填|描述返回结果|
message|string|必填|调试信息|
data|array|必填|业主信息

#### 2.2.3.4结果示例

``` json
1.成功
{
    "code": "0",
    "token_expired": "1",
    "msg": "验证成功",
    "message": "验证成功"
}
```

```  json
2.失败
{
    "code": "1",
    "token_expired": "1",
    "msg": "验证码错误",
    "message": "验证码错误"
}
```

```json
3.失败，token值超过1小时过期（理论上不应该出现token值过期的返回，因为过期时，应该先由小程序判断超过1小时过期，调取“刷新token”的接口，再携带新的token值（如果超过14天更新期限，则只能使用“code值获取token接口”重置token状态），来调取其他接口的数据。但实际当中，可能会出现意外情况，如还未到1小时，但服务器端缓存意外丢失，导致token值失效。）
{
    "code": "0",
    "token_expired": "0",
    "msg": "请重新建立智慧平台鉴权连接",
    "message": "token值因各种原因而失效，请重新调用接口获取token"
}
```

---
---
---

## 2.3附件上传

### 2.3.1人脸照片上传

>说明:该接口需要获得照片和绑定房屋的小区唯一标识、楼号、房屋号码等信息

>请求方法：POST

>url地址：<https://tc.mg.cool/api/v1/people/photo>

#### 2.3.1.1头部信息

> Authorization: Bearer token值

#### 2.3.1.2携带数据

``` javascript
    wx.uploadFile({
        filePath: res.tempFilePath,
        name: 'file',
        formData:{
            'community_identifier':_this.data.community_identifier,
            'building_number':_this.data.building_number,
            'unit_number':_this.data.unit_number,
            'floor_number':_this.data.floor_number,
            'house_number':_this.data.house_number
        },
        url: 'https://tc.mg.cool/api/v1/people/photo',
        success:function(message){
            console.log(JSON.parse(message.data))
        },
        fail:function(message){
            console.log(JSON.parse(message.data))
        }
    })
```

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
file|string|必填|文件名称|
community_identifier|integer|必填|小区唯一标识|
building_number|integer|必填|楼号|
unit_number|integer|必填|单元号|
floor_number|integer|必填|楼层号|
house_number|integer|必填|房屋号|

#### 2.3.1.3返回数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
code|integer|必填|处理结果|0成功，1出错
data|string|必填|照片OSS地址|
msg|string|必填|描述返回结果|
message|string|必填|调试信息|
token_expired|integer|必填|token值仍然未过期

#### 2.3.1.4结果示例

``` json
1.成功，返回图片url
{
    "code": "0",
    "data": "https://100k.mgg.cool/wjdh-platform/face-photo/1/2/3/4/401/202011/21/QhnV7ro72m5eYCTtdCNl6vLTusEigO7mNY7oVrVQ.png",
    "message": "图片上传成功,message编码Yi1320",
    "msg": "图片上传成功",
    "token_expired": "1"
}
```

```json
2.失败，参数不准确
{
    "code": "1",
    "token_expired": "1",
    "msg": "没有传递任何文件到后台",
    "message": "传递的file为空"
}
```

```json
5.失败，向OSS服务器上传失败
{
    "code": "1",
    "token_expired": "1",
    "msg": "图片上传失败",
    "message": "图片上传失败,message编码Yi1326"
}
```

---

### 2.3.2身份证验证

>说明:该接口上传身份证照片返回身份证相关信息

>请求方法：POST

>url地址：<https://tc.mg.cool/api/v1/idcard/photo>

#### 2.3.2.1头部信息

> Authorization: Bearer token值

#### 2.3.2.2携带数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
image|string|必填|身份证的base64码|

#### 2.3.2.3返回数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
code|integer|必填|处理结果|0成功，1出错
data|string|必填|身份证信息|
msg|string|必填|描述返回结果|
message|string|必填|调试信息|
token_expired|integer|必填|token值仍然未过期

#### 2.3.2.4结果示例

``` json
1.成功，返回身份证相关信息
{
    "code": "1",
    "token_expired": "1",
    "msg": "获取信息成功！",
    "data": {
        "birthday": "19921130",
        "address": "河北省秦皇岛市海港区秦皇小区98栋3单元4号",
        "gender": "男",
        "nation": "汉",
        "idcard": "130302199211302519",
        "name": "杨哲"
    },
    "message": "获取信息成功"
}
```

```json
2.失败，参数不准确
{
    "code": "1",
    "token_expired": "1",
    "msg": "没有传递image的base64码",
    "message": "传递的image字段为空"
}
```

---
---
---

## 2.4表单提交

### 2.4.1第一次录入一标三实表单

>说明:该表单将获取用户全部信息，包括个人信息、房屋信息

>请求方法：POST

>url地址：<https://tc.mg.cool/api/v1/weapp/yibiaosanshi>

#### 2.4.1.1头部信息

> Authorization: Bearer token值

#### 2.4.1.2携带数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
phone|string|必填|手机号|
idcard|string|必填|身份证号|
name|string|必填|姓名|
photo|string|必填|人脸照片地址|
sex|integer|必填|性别|1男2女
birth|integer|必填|出生日期|
nation|string|必填|民族|
address|string|必填|户籍地址|
zzmm|intger|必填|政治面貌|0群众1党员
tyjr|integer|必填|退役军人|0否1是
dibao|integer|必填|低保|0否1是
shangfang|integer|必填|上访记录|0否1是
job|string|必填|职业
company|string|必填|工作单位
house_id|integer|必填|房屋id|注意是id，而不是house_number
role|integer|选填|角色|详见前言
status|integer|选填|房屋状态|详见前言
use|integer|选填|房屋用途|详见前言
xingzhi|integer|选填|房屋性质|详见前言
choice|integer|选填|选择与业主绑定还是替换业主|1与业主绑定2替换业主
type|integer|选填|住户类型|详见前言

#### 2.4.1.3返回数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
code|integer|必填|处理结果|0成功，1出错
msg|string|必填|描述返回结果|
message|string|必填|调试信息|
token_expired|integer|必填|token值仍然未过期

#### 2.4.1.4结果示例

``` json
1.成功，提交审核
{
    "code": "0",
    "message": "已提交审核",
    "msg": "已提交审核",
    "token_expired": "1"
}
```

```json
2.失败，参数不准确
{
    "code": "1",
    "token_expired": "1",
    "msg": "没有填写姓名",
    "message": "没有填写姓名"
}
```

---

### 2.4.2绑定更多房屋

>说明:该表单一开始输入手机号，会判断该用户是否已经在people表中有数据，有数据则证明已经录入过一标三实数据，也就是说不必再录入个人信息，因此可以隐藏个人信息，并且在提交表单时，使用其他接口。

>请求方法：POST

>url地址：<2020年11月21日09:22:05未开发>

#### 2.4.2.1头部信息

> Authorization: Bearer token值

#### 2.4.2.2携带数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
phone|string|必填|手机号|
house_id|integer|必填|房屋id|注意是id，而不是house_number
role|integer|选填|角色|详见前言
status|integer|选填|房屋状态|详见前言
use|integer|选填|房屋用途|详见前言
xingzhi|integer|选填|房屋性质|详见前言
choice|integer|选填|选择与业主绑定还是替换业主|1与业主绑定2替换业主
type|integer|选填|住户类型|详见前言

#### 2.4.2.3返回数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
code|integer|必填|处理结果|0成功，1出错
msg|string|必填|描述返回结果|
message|string|必填|调试信息|
token_expired|integer|必填|token值仍然未过期

#### 2.4.2.4结果示例

``` json
1.成功，提交审核
{
    "code": "0",
    "message": "已提交审核",
    "msg": "已提交审核",
    "token_expired": "1"
}

```

```json
2.失败，参数不准确
{
    "code": "1",
    "token_expired": "1",
    "msg": "没有填写姓名",
    "message": "没有填写姓名"
}
```

---
---
---

# 3列表页面

## 3.1用户相关数据列表

### 3.1.1绑定房屋列表

>说明:获得该用户绑定房屋的数据列表，以及该用户等待审核和审核未通过的数据

>请求方法：POST

>url地址：<https://tc.mg.cool/api/v1/user/housesList>

#### 3.1.1.1头部信息

> Authorization: Bearer token值

#### 3.1.1.2返回数据

字段|类型|是否必填|释义|选项
|:--|:--|:--|:--|:--
house_id|integer|选填|房屋id|用来点击进入房屋详情页时使用的id号码
shenhe_id|integer|选填|审核id|用来点击进入审核详情页时使用的id号码
status|integer|必填|审核状态|默认房屋都是已通过审核，审核都是待审核或未通过审核（详见前言审核状态部分）
introduction|string|必填|对房屋的描述
action|string|选填|审核动作
role|integer|必填|居民在该房屋内的角色|直接返回角色汉字
not_register|integer|选填|未激活的家庭成员数目

#### 3.1.1.3结果示例

``` json
1.成功，返回列表数据
{
    "code": "0",
    "token_expired": "1",
    "msg": "成功获取用户一标三实列表",
    "data": [
        {
            "house_id": 1,
            "status": 1,
            "role": "1",
            "role_name":"业主",
            "introduction": "晨曦家园1栋1单元1楼101号",
            "not_register": 1
        },
        {
            "house_id": 2,
            "status": 1,
            "role": "3",
            "role_name":"父亲",
            "introduction": "晨曦家园3栋2单元4楼401号",
            "not_register": 5
        },
        {
            "shenhe_id": 1,
            "status": 2,
            "introduction": "晨曦家园1栋1单元1楼101号的业主正在申请：家属绑定",
            "action":"业主正在申请：业主绑定"
        }
    ],
    "message": "成功获取用户一标三实列表"
}

```

```  json
2.失败，未登录用户或token值超过1小时过期（理论上不应该出现token值过期的返回，因为过期时，应该先由小程序判断超过1小时过期，调取“刷新token”的接口，再携带新的token值（如果超过14天更新期限，则只能使用“code值获取token接口”重置token状态），来调取其他接口的数据。但实际当中，可能会出现意外情况，如还未到1小时，但服务器端缓存意外丢失，导致token值失效。）
{
    "code": "0",
    "token_expired": "0",
    "msg": "请重新建立智慧平台鉴权连接",
    "message": "token值因各种原因而失效，请重新调用接口获取token"
}
```

---

### 3.1.2房屋详情页

>说明:该页面包含了房屋的已绑定人口、未绑定、已激活、未激活

>请求方法：POST

>url地址：<https://tc.mg.cool/api/v1/house/detail>

#### 3.1.2.1头部信息

> Authorization: Bearer token值

#### 3.1.2.2携带数据

字段|类型|是否必填|释义|选项
|:--|:--|:--|:--|:--
id|integer|必填|房屋id
role|integer|必填|用户角色id

#### 3.1.2.3返回数据

字段|类型|是否必填|释义|补充
|:--|:--|:--|:--|:--
introduction|string|必填|房屋地址|
house_type|string|必填|房屋类型|见前言
use|string|必填|房屋用途|见前言
xingzhi|string|必填|房屋性质|见前言
status|string|必填|房屋状态|见前言
zhuhuleixing|string|必填|住户类型|见前言
data|array|必填|返回数据
message|string|必填|调试信息

- data
  
字段|类型|是否必填|释义|补充
|:--|:--|:--|:--|:--
yibangding|array|必填|已绑定的家庭成员
weibangding|array|必填|未绑定的家庭成员
yijihuo|array|必填|已激活的家庭成员
weijihuo|array|必填|未激活的家庭成员

#### 3.1.2.4结果示例

``` json
1.成功，返回列表数据
{
    "code": "0",
    "token_expired": "1",
    "msg": "成功获取房屋信息",
    "data": {
        "introduction": "晨曦家园1栋1单元1楼101号",
        "house_type": "单元楼",
        "use": "住宅",
        "xingzhi": "私有",
        "status": "自用",
        "zhuhuleixing": "业主",
        "yibangding": [
            {
                "name": "付钰",
                "role": "业主"
            },
            {
                "name": "付文生",
                "role": "丈夫"
            }
        ],
        "weibangding": [
            {
                "introduction": "晨曦家园1栋1单元1楼101号的租客正在申请：租客绑定",
                "status": "待审核",
                "type":"租客绑定"
            },
            {
                "introduction": "晨曦家园1栋1单元1楼101号的家属正在申请：家属绑定",
                "status": "未通过",
                "type":"家属绑定"
            },
        ],
        "yijihuo": [
            {
                "name": "付钰",
                "role": "业主"
            }
        ],
        "weijihuo": [
            {
                "name": "付文生",
                "role": "丈夫"
            }
        ]
    },
    "message": "成功获取房屋信息"
}

```

```  json
2.失败，未登录用户或token值超过1小时过期（理论上不应该出现token值过期的返回，因为过期时，应该先由小程序判断超过1小时过期，调取“刷新token”的接口，再携带新的token值（如果超过14天更新期限，则只能使用“code值获取token接口”重置token状态），来调取其他接口的数据。但实际当中，可能会出现意外情况，如还未到1小时，但服务器端缓存意外丢失，导致token值失效。）
{
    "code": "0",
    "token_expired": "0",
    "msg": "请重新建立智慧平台鉴权连接",
    "message": "token值因各种原因而失效，请重新调用接口获取token"
}
```
