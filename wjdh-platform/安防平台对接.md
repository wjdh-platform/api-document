# 接口文档

# 1、一标三实录入流程接口

## 1.1安防平台提供接口：

### 1.1.1 获取token

>说明:获取鉴权token

>请求方法：POST

>url:

### 头部信息
Content-Type: application/x-www-form-urlencoded

### 携带数据:
字段|格式|名称|补充
|:--|:--|:--|:--
key_k|string|键值key
key_d|string|键值value

### 返回数据
字段|格式|名称|补充
|:--|:--|:--|:--
code|integer|处理结果|可选，0成功，1出错
msg|string|描述|可选，调试时可供参考
token|string|token值|必选

### 1.1.2 通过手机号得到安防平台用户数据

>说明:根据手机号查找安防平台数据库，返回用户信息、用户绑定房屋信息

>请求方法：POST
### 头部信息
Content-Type: application/x-www-form-urlencoded
### 携带数据:
字段|格式|名称|补充
|:--|:--|:--|:--
phone|integer|手机号码
token|string|鉴权token|

### 返回数据：
字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
code|integer|必填|处理结果|0成功，1出错
msg|string|选填|描述返回结果|
data|string|必填|一标三实数据|详见接口附录
### 结果示例

```
1、返回成功
{
    "code": "0",
    "msg": "token获取成功",
    "token": "E10A78Q0TAjs5Yh"
}
```
```
2、返回失败
{
    "code": "1",
    "msg": "token获取失败"
}
```
### 接口附录
- data
  

```
{
        "people_name": "付钰",
        "people_sex": 1,
        "people_nation": "汉族",
        "people_birth": "19870504",
        "people_address": "河北省秦皇岛市海港区秦皇小区98-3-4",
        "people_idcard": "130302199211302219",
        "people_phone": "15131512234",
        "people_photo": "https:\\/\\/tc.mg.cool\\/uploads\\/test.png",
        "people_zhengzhimianmao": "1",
        "people_tuiyijunren": "0",
        "people_dibao": "0",
        "people_shangfang": "0",
        "job_name": "WEB工程师",
        "company_name": "万家灯火科技（河北）有限责任公司",
        "houses": [{
            "xiaoqu": "1",
            "louhao": "1",
            "danyuan": "1",
            "louceng": "1",
            "fangjian": "101",
            "people_house_use":1,
            "people_house_xingzhi":1,
            "people_house_status":1,
            "people_house_role":1,
            "people_house_type":1,
            "members": [{
                "people_idcard": "130324198705046010",
                "people_house_name": "付文生",
                "people_house_role": "3"
            }, {
                "people_idcard": "130324198705046010",
                "people_house_name": "付钰",
                "people_house_role": "1"
            }]
        }]
    }
```
字段|类型|释义|选项
|:--|:--|:--|:--
people_name|string|姓名|杨哲
people_sex|integer|性别|1男2女
people_nation|integer|民族|汉
people_birth|integer|出生日期|19921130
people_address|string|户籍地址|秦皇岛市海港区秦皇小区98-3-4
people_phone|string|头像|OSS头像地址
people_zhengzhimianmao|integer|政治面貌|1群众2党员
people_tuiyijunren|integer|退役军人|0否1是
people_dibao|integer|低保|0否1是
people_shangfang|integer|上访|0否1是
job_name|string|工作|WEB工程师
company_name|string|公司|万家灯火科技（河北）有限责任公司
people_house_use|integer|房屋用途|见房屋用途表
people_house_xingzhi|integer|房屋性质|见房屋性质表
people_house_status|integer|居住现状|见居住现状表
people_house_role|integer|居民角色|见居民角色表
people_house_type|integer|住户类型|见住户类型表
members|array|房屋成员的资料|见下表
- 居民角色：
  
编号|名称|补充
|:--|:--|:--
0|家属|为防止物业端搞不清楚亲属的具体身份而设置，一般情况下不建议填写0
1|本人|业主本人
2|租客|所有非业主亲属的都是租客（包括租客的家人）
3|丈夫|
4|妻子|
5|父亲|
6|母亲|
7|爷爷|
8|奶奶|
9|姥爷|
10|姥姥|
11|儿子|
12|女儿|
13|其他|连是不是亲属、是不是租客都搞不清楚，那只能选其他了

- 房屋用途:
  
编号|名称|补充
|:--|:--|:--
1|住宅|
2|生产|
3|经营（商业）（饭店）|
4|仓储|
5|教育（医疗、卫生、科研）|
6|文化(娱乐、体育)|
7|办公|
8|商业（金融）（信息）|
9|其他|

- 房屋性质:
  
编号|名称|补充
|:--|:--|:--
1|私有|
2|公有|
3|其他|

- 居住现状:
  
编号|名称|补充
|:--|:--|:--
1|自用|
2|闲置|
3|借用|
4|空挂|
5|租用|
6|拆迁|
7|其他|

- 住户类型:
  
编号|名称|补充
|:--|:--|:--
1|业主|
2|租户|
3|其他|



- members数组
  
> 一位已经在安防平台录入信息的居民（非业主），在使用小程序之前，可以因为业主"同步安防数据”操作而保存该居民的部分安防平台保存的基础数据（姓名、身份证号码、角色）。此时该部分基础数据只作为业主房屋信息的一部分进行显示。而以下两种情况会激活或者补完该部分数据：
> 1、该居民注册小程序帐号后，录入一标三实，与房屋进行绑定，激活并补完已保存的不完整记录。
> 2、业主替该居民录入全部一标三实信息，完成补完，但尚未激活。

编号|名称|补充
|:--|:--|:--
people_idcard|身份证号码|
people_house_name|居民名称|居民激活帐号后可以将真实名称修改为家庭昵称，如“孩儿他爸
people_house_role|居民角色|见上表