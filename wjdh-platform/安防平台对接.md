<!-- TOC -->

- [接口编纂者](#接口编纂者)
    - [1-yangzhe杨哲(tonyhappystyle@163.com)](#1-yangzhe杨哲tonyhappystyle163com)
- [前言：各种一标三实数据对应号码](#前言各种一标三实数据对应号码)
- [1一标三实录入流程接口](#1一标三实录入流程接口)
  - [1.1安防平台提供接口](#11安防平台提供接口)
    - [1.1.1 获取token](#111-获取token)
      - [1.1.1.1头部信息](#1111头部信息)
      - [1.1.1.2携带数据](#1112携带数据)
      - [1.1.1.3返回数据](#1113返回数据)
      - [1.1.1.4重要补充说明](#1114重要补充说明)
    - [1.1.2 通过手机号和姓名得到安防平台用户数据](#112-通过手机号和姓名得到安防平台用户数据)
      - [1.1.2.1头部信息](#1121头部信息)
      - [1.1.2.2携带数据](#1122携带数据)
      - [1.1.2.3返回数据](#1123返回数据)
      - [1.1.2.4结果示例](#1124结果示例)
      - [1.1.2.5接口附录](#1125接口附录)
    - [1.1.3 如果房屋存在业主，返回业主手机号](#113-如果房屋存在业主返回业主手机号)
      - [1.1.3.1头部信息](#1131头部信息)
      - [1.1.3.2携带数据](#1132携带数据)
      - [1.1.3.3返回数据](#1133返回数据)
      - [1.1.3.4接口附录](#1134接口附录)
  - [1.2万家灯火平台提供接口](#12万家灯火平台提供接口)
    - [1.2.1获取token](#121获取token)
      - [1.2.1.1头部信息](#1211头部信息)
      - [1.2.1.2携带数据](#1212携带数据)
      - [1.2.1.3返回数据](#1213返回数据)
      - [1.2.1.4返回示例](#1214返回示例)
    - [1.2.2获取审核数据列表](#122获取审核数据列表)
      - [1.2.2.1携带数据](#1221携带数据)
      - [1.2.2.2头部信息](#1222头部信息)
      - [1.2.2.3返回数据](#1223返回数据)
      - [1.2.2.4返回示例](#1224返回示例)
      - [1.2.2.5接口附录](#1225接口附录)
    - [1.2.3获取单独一条审核数据](#123获取单独一条审核数据)
      - [1.2.3.1携带数据](#1231携带数据)
      - [1.2.3.2头部信息](#1232头部信息)
      - [1.2.3.3返回数据](#1233返回数据)
      - [1.2.3.4返回示例](#1234返回示例)
    - [1.2.4更新审核状态](#124更新审核状态)
      - [1.2.4.1携带数据](#1241携带数据)
      - [1.2.4.2头部信息](#1242头部信息)
      - [1.2.4.3返回数据](#1243返回数据)
      - [1.2.4.4返回示例](#1244返回示例)
- [2订单支付流程](#2订单支付流程)
  - [2.1智慧平台提供接口](#21智慧平台提供接口)
    - [2.1.1 生成订单](#211-生成订单)
      - [2.1.1.1头部信息](#2111头部信息)
      - [2.1.1.2携带数据](#2112携带数据)
      - [2.1.1.3返回数据](#2113返回数据)
      - [2.1.1.4返回示例](#2114返回示例)
      - [2.1.1.5接口附录](#2115接口附录)
    - [2.1.2 订单列表/查询订单](#212-订单列表查询订单)
      - [2.1.2.1头部信息](#2121头部信息)
      - [2.1.2.2携带数据](#2122携带数据)
      - [2.1.2.3返回数据](#2123返回数据)
      - [2.1.2.4返回示例](#2124返回示例)
    - [2.1.3 账单列表/账单查询（功能未开发12月13日）](#213-账单列表账单查询功能未开发12月13日)
  - [2.2安防平台提供接口](#22安防平台提供接口)
    - [2.2.1接收缴费信息返回](#221接收缴费信息返回)
      - [2.2.2.1头部信息](#2221头部信息)
      - [2.3.2.2携带数据](#2322携带数据)
      - [2.3.2.3返回数据](#2323返回数据)
      - [2.3.2.4返回示例](#2324返回示例)
- [3数据同步](#3数据同步)
  - [3.1安防平台提供接口](#31安防平台提供接口)
    - [3.1.1 小区功能模块状态同步](#311-小区功能模块状态同步)
      - [3.1.1.1头部信息](#3111头部信息)
      - [3.1.1.2携带数据](#3112携带数据)
      - [3.1.1.3返回数据](#3113返回数据)
      - [3.1.1.4返回示例](#3114返回示例)
  - [3.2智慧家园平台提供接口](#32智慧家园平台提供接口)
    - [3.2.1 小区功能模块状态列表](#321-小区功能模块状态列表)
      - [3.2.1.1头部信息](#3211头部信息)
      - [3.2.1.2携带数据](#3212携带数据)
      - [3.2.1.3返回数据](#3213返回数据)
      - [3.2.1.4返回示例](#3214返回示例)
    - [3.2.2 小区功能模块状态改变](#322-小区功能模块状态改变)
      - [3.2.2.1头部信息](#3221头部信息)
      - [3.2.2.2携带数据](#3222携带数据)
      - [3.2.2.3返回数据](#3223返回数据)
      - [3.2.2.4返回示例](#3224返回示例)
- [4报修](#4报修)
  - [4.1报修列表](#41报修列表)
    - [4.1.1头部信息](#411头部信息)
    - [4.1.2携带数据](#412携带数据)
    - [4.1.3返回数据](#413返回数据)
    - [4.1.4返回示例](#414返回示例)
  - [4.2查看单独某条报修记录](#42查看单独某条报修记录)
    - [4.2.1头部信息](#421头部信息)
    - [4.2.2携带数据](#422携带数据)
    - [4.2.3返回数据](#423返回数据)
    - [4.2.4返回示例](#424返回示例)
  - [4.3更新报修状态](#43更新报修状态)
    - [4.3.1头部信息](#431头部信息)
    - [4.3.2携带数据](#432携带数据)
    - [4.3.3返回数据](#433返回数据)
    - [4.3.4返回示例](#434返回示例)
- [5公告](#5公告)
  - [5.1创建公告](#51创建公告)
    - [5.1.1头部信息](#511头部信息)
    - [5.1.2携带数据](#512携带数据)
    - [5.1.3返回数据](#513返回数据)
    - [5.1.4返回示例](#514返回示例)
- [6投诉建议](#6投诉建议)

<!-- /TOC -->

# 接口编纂者

### 1-yangzhe杨哲(tonyhappystyle@163.com)

# 前言：各种一标三实数据对应号码

- <span id="people_house_roles">居民角色</span>：
  
（取消编号，统一改为中文字符串）
名称|补充
|:--|:--
家属|为防止物业端搞不清楚亲属的具体身份而设置
业主|业主本人
租客|所有非业主亲属的都是租客（包括租客的家人）
丈夫|
妻子|
父亲|
母亲|
爷爷|
奶奶|
姥爷|
姥姥|
儿子|
女儿|
其他|连是不是亲属、是不是租客都搞不清楚，那只能选其他了

- <span id="people_house_use">房屋用途</span>:
  
名称|补充
|:--|:--
住宅|
生产|
经营|（商业）（饭店）
仓储|
教育|（医疗、卫生、科研）
文化|(娱乐、体育)
办公|
商业|（金融）（信息）
其他|

- <span id="house_type">房屋类型</span>

名称|补充
|:--|:--
单元楼|
筒子楼|
四合院|
独立平房|
自建小楼|
别墅|
自建|
其他|

- <span id="people_house_xingzhi">房屋性质</span>:
  
名称|补充
|:--|:--
私有|
公有|
其他|

- <span id="people_house_status">房屋状态</span>:
  
名称|补充
|:--|:--
自用|
闲置|
借用|
空挂|
租用|
拆迁|
其他|

- <span id="people_house_type">住户类型</span>:
  
|名称|补充
|:--|:--
业主|
租户|
其他|

- <span id="shenhe_type">审核类型</span>
  
名称|补充
|:--|:--
业主绑定|11月18日已开发
租客绑定|11月18日已开发
家属绑定|11月18日已开发
替换业主|11月18日已开发
业主解绑|11月18日未开发解绑功能
租客解绑|11月18日未开发解绑功能
家属解绑|11月18日未开发解绑功能
修改房屋数据|11月18日未开发修改功能
修改个人信息|11月18日未开发修改功能

- <span id="shenhe_status">审核状态</span>
  
编码|名称|补充
|:--|:--|:--
0|审核未通过|
1|审核通过|
2|等待审核|

- <span id="shenhe_content">审核数据</span>

```json
{
"people": {
    "user_id": 2,
    "people_phone": "17600381130",
    "people_name": "杨哲",
    "people_sex": "男",
    "people_nation": "汉族",
    "people_birth": "19921130",
    "people_address": "秦皇小区98栋3单元4号",
    "people_idcard": "130302199211302519",
    "people_photo": "https://100k.mgg.cool/wjdh-platform/face-photo/10002/1/1/2/201/yeBgQcFkVTxqQQQ21axSJBol3QHOQmT43a338w6Z.png",
    "people_zhengzhimianmao": "群众",
    "people_tuiyijunren": "0",
    "people_shangfang": "0",
    "people_dibao": "0"
},
"job": {
    "job_name": "程序员"
},
"company": {
    "company_name": "万家灯火"
},
"house": {
    "id": "4",
    "community_identifier": "10002",
    "building_number": 1,
    "unit_number": 1,
    "floor_number": 2,
    "house_number": 201,
    "people_house_role": "业主",
    "people_house_status": "自用",
    "people_house_use": "住宅",
    "people_house_xingzhi": "私有",
    "people_house_type": "业主绑定"
}
}
```

# 1一标三实录入流程接口

## 1.1安防平台提供接口

### 1.1.1 获取token

>说明:获取鉴权token

>请求方法：POST

>url:

#### 1.1.1.1头部信息

> Content-Type: application/x-www-form-urlencoded

#### 1.1.1.2携带数据

字段|格式|名称|补充
|:--|:--|:--|:--
key_k|string|键值key
key_d|string|键值value

#### 1.1.1.3返回数据

字段|格式|名称|补充
|:--|:--|:--|:--
code|integer|处理结果|可选，0成功，1出错，2没查找到
msg|string|描述|可选，调试时可供参考
token|string|token值|必选

#### 1.1.1.4重要补充说明

连接所有智慧平台接口时，如果token值超过1小时过期时，会出现如下返回值
{
    "code": "9",
    "token_expired": "0",
    "msg": "请重新建立智慧平台鉴权连接",
    "message": "token值因各种原因而失效，请重新调用接口获取token"
}

### 1.1.2 通过手机号和姓名得到安防平台用户数据

>说明:根据手机号查找安防平台数据库，返回用户信息、用户绑定房屋信息

>请求方法：POST

#### 1.1.2.1头部信息

> Content-Type: application/x-www-form-urlencoded

#### 1.1.2.2携带数据

字段|格式|名称|补充
|:--|:--|:--|:--
name|string|姓名
phone|integer|手机号码
token|string|鉴权token|

#### 1.1.2.3返回数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
code|integer|必填|处理结果|0成功，1出错
msg|string|选填|描述返回结果|
data|string|必填|一标三实数据|详见接口附录

#### 1.1.2.4结果示例

```json
1、返回成功
{
    "code": "0",
    "msg": "token获取成功",
    "token": "E10A78Q0TAjs5Yh"
}
```

``` json
2、返回失败
{
    "code": "1",
    "msg": "token获取失败"
}
```

#### 1.1.2.5接口附录

- data
  
``` json
{
        "people_name": "付钰",
        "people_sex": "男",
        "people_nation": "汉族",
        "people_birth": "723052800",
        "people_address": "河北省秦皇岛市海港区秦皇小区98-3-4",
        "people_idcard": "130302199211302219",
        "people_phone": "15131512234",
        "people_photo": "https://tc.mg.cool/uploads/test.png",
        "people_zhengzhimianmao": "群众",
        "people_tuiyijunren": "0",
        "people_dibao": "0",
        "people_shangfang": "0",
        "job_name": "WEB工程师",
        "company_name": "万家灯火科技（河北）有限责任公司",
        "houses": [{
            "xiaoqu": "10002",
            "louhao": "1",
            "danyuan": "1",
            "louceng": "1",
            "fangjian": "101",
            "people_house_use":"住宅",
            "people_house_xingzhi":"私有",
            "people_house_status":"自用",
            "people_house_role":"业主",
            "people_house_type":"业主",
            "members": [{
                "member_idcard": "130324198705041234",
                "member_name": "付文生",
                "member_role": "父亲",
                "member_sex":"男",
                "member_nation":"汉族",
                "member_birth":"19870504",
                "member_address":"河北省秦皇岛市海港区秦皇小区98-3-4",
                "member_phone":"17600381130",
                "member_photo":"https://tc.mg.cool/uploads/test.png",
                "member_zhengzhimianmao":"群众",
                "member_tuiyijunren":0,
                "member_dibao":0,
                "member_shangfang":0,
                "member_job_name":"工程师",
                "member_company_name":"万家灯火"
            }, {
                "member_idcard": "130302199211302219",
                "member_name": "付钰",
                "member_role": "业主",
                "member_sex":"男",
                "member_nation":"汉族",
                "member_birth":"19870504",
                "member_address":"河北省秦皇岛市海港区秦皇小区98-3-4",
                "member_phone":"17600381130",
                "member_photo":"https://tc.mg.cool/uploads/test.png",
                "member_zhengzhimianmao":"群众",
                "member_tuiyijunren":0,
                "member_dibao":0,
                "member_shangfang":0,
                "member_job_name":"工程师",
                "member_company_name":"万家灯火"
            }]
        },
        {
            "xiaoqu": "10002",
            "louhao": "1",
            "danyuan": "1",
            "louceng": "1",
            "fangjian": "102",
            "people_house_use":"住宅",
            "people_house_xingzhi":"私有",
            "people_house_status":"自用",
            "people_house_role":"业主",
            "people_house_type":"业主",
            "members": [{
                "member_idcard": "130302199211302219",
                "member_name": "张三",
                "member_role": "爷爷",
                "member_sex":"男",
                "member_nation":"汉族",
                "member_birth":"19870504",
                "member_address":"河北省秦皇岛市海港区秦皇小区98-3-4",
                "member_phone":"17600381130",
                "member_photo":"https://tc.mg.cool/uploads/test.png",
                "member_zhengzhimianmao":"群众",
                "member_tuiyijunren":0,
                "member_dibao":0,
                "member_shangfang":0,
                "member_job_name":"工程师",
                "member_company_name":"万家灯火"
            }, {
                "member_idcard": "130324198705043214",
                "member_name": "付云",
                "member_role": "业主",
                "member_sex":"男",
                "member_nation":"汉族",
                "member_birth":"19870504",
                "member_address":"河北省秦皇岛市海港区秦皇小区98-3-4",
                "member_phone":"17600381130",
                "member_photo":"https://tc.mg.cool/uploads/test.png",
                "member_zhengzhimianmao":"群众",
                "member_tuiyijunren":0,
                "member_dibao":0,
                "member_shangfang":0,
                "member_job_name":"工程师",
                "member_company_name":"万家灯火"
            }]
        }]
    }
```

字段|类型|释义|选项
|:--|:--|:--|:--
people_name|string|姓名|杨哲
people_sex|integer|性别|男\女
people_phone|string|电话|
people_nation|integer|民族|汉
people_birth|integer|出生日期|19921130
people_address|string|户籍地址|秦皇岛市海港区秦皇小区98-3-4
people_photo|string|头像|OSS头像地址
people_zhengzhimianmao|string|政治面貌|群众\党员
people_tuiyijunren|integer|退役军人|0否1是
people_dibao|integer|低保|0否1是
people_shangfang|integer|上访|0否1是
job_name|string|工作|WEB工程师
company_name|string|公司|万家灯火科技（河北）有限责任公司
people_house_use|string|房屋用途|见[房屋用途表](#people_house_use)
people_house_xingzhi|string|房屋性质|见[房屋性质表](#people_house_xingzhi)
people_house_status|string|房屋状态|见[房屋状态表](#people_house_status)
people_role|string|申请者在该房屋内扮演的角色|见[居民角色表](#people_house_roles)
people_house_type|string|住户类型|见[住户类型表](#people_house_type)
members|array|房屋成员的资料|见下表

- members数组
  
> 说明：一位已经在安防平台录入信息的居民（非业主），在使用小程序之前，可以因为业主"同步安防数据”操作而保存该居民的全部安防平台的基础数据（姓名、身份证号码、角色、职业等等）。此时该居民处于未激活状态。而以下情况会激活：
> 1、该居民注册小程序帐号后，录入一标三实，与房屋进行绑定，激活。

编号|名称|补充
|:--|:--|:--
member_name|string|姓名|杨哲
member_phone|string|电话|
member_sex|string|性别|男/女
member_nation|integer|民族|汉
member_birth|integer|出生日期|时间戳
member_address|string|户籍地址|秦皇岛市海港区秦皇小区98-3-4
member_photo|string|头像|OSS头像地址
member_zhengzhimianmao|string|政治面貌|群众\党员
member_tuiyijunren|integer|退役军人|0否1是
member_dibao|integer|低保|0否1是
member_shangfang|integer|上访|0否1是
member_job_name|string|工作|WEB工程师
member_company_name|string|公司|万家灯火科技（河北）有限责任公司

### 1.1.3 如果房屋存在业主，返回业主手机号

>说明：通过社区标识、楼栋号码、单元号码、楼层号码、房屋号码，得到该房屋业主的数据

>请求方法：POST

>URL:

#### 1.1.3.1头部信息

> Content-Type: application/x-www-form-urlencoded

#### 1.1.3.2携带数据

字段|格式|名称|补充
|:--|:--|:--|:--
community_identifier|integer|社区唯一标识|如“晨曦社区”的标识为“10002”
building_number|integer|楼号
unit_number|integer|单元号
floor_number|integer|楼层号
house_number|integer|房间号
token|string|鉴权token|

#### 1.1.3.3返回数据

字段|格式|是否必填|名称|补充
|:--|:--|:--|:--|:--
code|integer|必填|处理结果|0成功，1出错，2没查找到
msg|string|选填|描述返回结果|
data|string|必填|房屋业主数据|见附录

#### 1.1.3.4接口附录

- data
  
``` json
{
    "people_phone": "17600381130",
    "people_house_use":"住宅",
    "people_house_xingzhi":"私有",
    "people_house_status":"自用",
    "people_house_role":"业主",
    "people_house_type":"业主"
}
```

字段|格式|释义|补充
|:--|:--|:--|:--
people_phone|string|业主手机号|
people_house_use|string|房屋用途|见[房屋用途表](#people_house_use)
people_house_xingzhi|string|房屋性质|见[房屋性质表](#people_house_xingzhi)
people_house_status|string|房屋状态|见[房屋状态表](#people_house_status)
people_role|string|申请者在该房屋内扮演的角色|见[居民角色表](#people_house_roles)
people_house_type|string|住户类型|见[住户类型表](#people_house_type)

## 1.2万家灯火平台提供接口

### 1.2.1获取token

>说明:返回鉴权token

>请求方法：POST

>url:<https://tc.mg.cool/api/v1/wjdh/secret>

#### 1.2.1.1头部信息

无

#### 1.2.1.2携带数据

字段|格式|释义|是否必填|补充
|:--|:--|:--|:--|:--
secret_id|string|键|必填|测试使用123456
secret_key|string|键值|必填|测试使用123456

#### 1.2.1.3返回数据

字段|格式|释义|补充
|:--|:--|:--|:--
code|integer|报错值|0无报错1有报错
token_expired|integer|token值是否失效|0失效1有效
msg|string|返回值说明|获取到了token值
access_token|string|token值|
token_type|string|token的携带方式，默认是“Bearer”|header头'Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhb' 注意Bear和token值之间的空格
expires_in|过期时间|3600(秒)

#### 1.2.1.4返回示例

``` json
1、成功
{
    "code": "0",
    "token_expired": "1",
    "msg": "获取到了token值",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczpcL1wvdGMubWcuY29vbFwvYXBpXC92MVwvd2pkaFwvc2VjcmV0IiwiaWF0IjoxNjA1Njg4NDY0LCJleHAiOjE2MDU2OTIwNjQsIm5iZiI6MTYwNTY4ODQ2NCwianRpIjoiSWgzS1lUWGFTc0hCZFVBbiIsInN1YiI6MTAwLCJwcnYiOiJiODYyMzlmNjMyZjlhZTRlYTBjOWM1YzBjZmE2YzBjNWM5MDZhMmNhIn0.g-xTUgicQ9lJ972ymQbLZw2Astisamku9wdD_urENiw",
    "token_type": "Bearer",
    "expires_in": 3600
}
```

``` json
2、失败
{
    "code": "1",
    "msg": "没有找到该密钥对儿对应的用户，请联系万家灯火平台的数据库负责人",
    "message": "告诉负责人，是security_platform_managers表里没有查找到"
}
```

### 1.2.2获取审核数据列表

>说明:获取审核数据的列表

>请求方法：POST

>URL:<https://tc.mg.cool/api/v1/wjdh/shenheList>

#### 1.2.2.1携带数据

字段|格式|释义|是否必填|补充
|:--|:--|:--|:--|:--
type|string|审核（目的）类型|非必填|不填即默认无此筛选项。见前言[审核类型](#shenhe_type)
community_identifier|integer|安防平台社区表的唯一标识|必填|如晨曦家园的唯一标识是“10002”
status|integer|审核状态|非必填|不填即默认无此筛选项。见附录[审核状态](#shenhe_status)
page|integer|页数|非必填|默认1
per_page|integer|每页显示条数|非必填|默认20

#### 1.2.2.2头部信息

> Authorization: Bearer token值

#### 1.2.2.3返回数据

字段|格式|释义|补充
|:--|:--|:--|:--
id|integer|审核id|用来调用“编辑单独某条审核数据”的接口（见后面文档的内容）
shenhe_type|integer|审核类型|见前言[审核类型](#shenhe_type)
shenhe_content|string|审核内容|用来展示和提取数据，见前言[审核数据content](#shenhe_content)
shenhe_status|integer|审核状态|见前言[审核状态](#shenhe_status)
shenhe_house_introduction|string|审核房屋地址简介|
shenhe_action_introduction|string|审核动作简介|
shenhe_refuse_reason|string|拒绝理由
created_at|string|审核记录创建时间|
updated_at|string|审核记录修改时间|
links|array|翻页接口|见附录
meta|array|翻页状态总述|见附录

#### 1.2.2.4返回示例

``` json
1.成功返回
{
    "data": [
        {
            "id":1,
            "shenhe_type": "业主绑定",
            "shenhe_content":"{"people":{"user_id":5,"people_phone":"17600381130","people_name":"\u6768\u54f2","people_sex":2,"people_nation":"\u6c49\u65cf","people_birth":723052800,"people_address":"\u963f\u65af\u987f\u53d1\u9001\u5230\u53d1\u8fbe","people_idcard":"130302199211302519","people_photo":"www","people_zhengzhimianmao":"1","people_tuiyijunren":"0","people_shangfang":"0","people_dibao":"0"},"job":{"job_name":"\u7a0b\u5e8f\u5458"},"company":{"company_name":"\u4e07\u5bb6\u706f\u706b"},"house":{"id":"1","community_identifier":"1","building_number":1,"unit_number":1,"floor_number":1,"house_number":101,"people_house_role":1,"people_house_status":"1","people_house_use":"1","people_house_xingzhi":"1","people_house_type":"1"}}",
            "shenhe_status": "等待审核,
            "shenhe_house_introduction": "晨曦家园1栋1单元1楼101号",
            "shenhe_action_introduction": "业主正在申请：业主绑定",
            "shenhe_refuse_reason": null,
            "created_at": "2020年11月18日11:01:46",
            "updated_at": "2020年11月18日11:01:46"
        },
        {
            "shenhe_id":2,
            "shenhe_type": "租客绑定",
            "shenhe_content":"{"people":{"user_id":5,"people_phone":"17600381130","people_name":"\u6768\u54f2","people_sex":2,"people_nation":"\u6c49\u65cf","people_birth":723052800,"people_address":"\u963f\u65af\u987f\u53d1\u9001\u5230\u53d1\u8fbe","people_idcard":"130302199211302519","people_photo":"www","people_zhengzhimianmao":"1","people_tuiyijunren":"0","people_shangfang":"0","people_dibao":"0"},"job":{"job_name":"\u7a0b\u5e8f\u5458"},"company":{"company_name":"\u4e07\u5bb6\u706f\u706b"},"house":{"id":"1","community_identifier":"1","building_number":1,"unit_number":1,"floor_number":1,"house_number":101,"people_house_role":1,"people_house_status":"1","people_house_use":"1","people_house_xingzhi":"1","people_house_type":"1"}}",
            "shenhe_status": "等待审核",
            "shenhe_house_introduction": "晨曦家园1栋1单元1楼102号",
            "shenhe_action_introduction": "业主正在申请：业主绑定",
            "shenhe_refuse_reason": null,
            "created_at": "2020年11月18日12:01:46",
            "updated_at": "2020年11月18日12:01:46"
        }
    ],
    "links": {
        "first": "http://laravel7.test/api/v1/wjdh/shenheList?page=1",
        "last": "http://laravel7.test/api/v1/wjdh/shenheList?page=3",
        "prev": "http://laravel7.test/api/v1/wjdh/shenheList?page=1",
        "next": "http://laravel7.test/api/v1/wjdh/shenheList?page=3"
    },
    "meta": {
        "current_page": 2,
        "from": 2,
        "last_page": 3,
        "path": "http://laravel7.test/api/v1/wjdh/shenheList",
        "per_page": "1",
        "to": 2,
        "total": 3
    }
}
```

``` json
2、错误访问返回
{
    "code": "1",
    "token_expired": "1",
    "msg": "服务器开小差，请重试",
    "message": "没有根据community_identifier查找到小区，请核实社区的唯一标识是否有误"
}
```

``` json
3、无权访问返回
{
    "code": "1",
    "token_expired": "1",
    "msg": "您没有权限管理该小区，请核对授权信息",
    "message": "该小区没有授权给该安防平台管理员权限，请联系万家灯火平台管理员（message编码Se104）"
}
```

#### 1.2.2.5接口附录

- links
  
字段|名称|补充
|:--|:--|:--
first|第一页接口|
last|最后一页接口|
prev|前一页接口|
next|后一页接口|

- meta

字段|名称|补充
|:--|:--|:--
current_page|当前页码|
from|本页开始是从第多少条记录为起点|
last_page|最后一页|
path|接口地址|
per_page|每页显示记录数量|
to|本页结束是从第多少条为终点|
total|总共有多少条记录

### 1.2.3获取单独一条审核数据

>说明:获取审核数据的列表

>请求方法：POST

>URL:<https://tc.mg.cool/api/v1/wjdh/shenhe>

#### 1.2.3.1携带数据

字段|格式|释义|是否必填|补充
|:--|:--|:--|:--|:--
id|integer|审核id|必填

#### 1.2.3.2头部信息

> Authorization: Bearer token值

#### 1.2.3.3返回数据

字段|格式|释义|补充
|:--|:--|:--|:--
code|integer|报错值|0无报错1有报错
token_expired|integer|token值是否失效|0失效1有效
data|array|审核数据|见前言[审核数据content](#shenhe_content)
msg|string|返回值说明|获取到了token值

#### 1.2.3.4返回示例

``` json
1.成功返回
{
    "code": "0",
    "token_expired": "1",
    "data": {
        "id": 1,
        "shenhe_type": "业主绑定",
        "shenhe_content":"见前言",
        "shenhe_status": 2,
        "shenhe_house_introduction": "晨曦家园1栋1单元1楼101号",
        "shenhe_action_introduction": "业主正在申请：业主绑定",
        "shenhe_refuse_reason": null,
        "created_at": "2020年11月18日11:01:46",
        "updated_at": "2020年11月18日11:01:46"
    },
    "msg": "成功查询到该条审核数据",
    "message": "成功查询到该条审核数据"
}
```

``` json
2、错误访问返回
{
    "code": "1",
    "token_expired": "1",
    "msg": "服务器开小差，请重试",
    "message": "必须传递shenhe表的id值"
}
```

``` json
3、无权访问返回
{
    "code": "1",
    "token_expired": "1",
    "msg": "您没有权限管理该小区，请核对授权信息",
    "message": "该小区没有授权给该安防平台管理员权限，请联系万家灯火平台管理员（message编码Se160）"
}
```

### 1.2.4更新审核状态

>说明:对审核的内容进行处理，最后调用该接口返回审核结果

>请求方法：PUT

>URL:<https://tc.mg.cool/api/v1/wjdh/shenhe>

#### 1.2.4.1携带数据

字段|格式|释义|是否必填|补充
|:--|:--|:--|:--|:--
id|integer|审核记录的id值|必填
status|integer|审核状态|必填|见前言[审核状态](#shenhe_status)
content|string|审核内容|非必填|见前言[审核数据](#shenhe_content)
page|integer|页数|非必填|默认1
per_page|integer|每页显示条数|非必填|默认20

#### 1.2.4.2头部信息

> Authorization: Bearer token值
>
> Content-Type: application/x-www-form-urlencoded

#### 1.2.4.3返回数据

字段|格式|释义|补充
|:--|:--|:--|:--
code|integer|报错值|0无报错1有报错
token_expired|integer|token值是否失效|0失效1有效
data|array|审核数据|见前言[审核数据content](#shenhe_content)
msg|string|返回值说明|获取到了token值

#### 1.2.4.4返回示例

``` json
1.成功返回
{
    "code": "0",
    "token_expired": "1",
    "data": {
        "id": 1,
        "shenhe_type": "业主绑定",
        "shenhe_content":"见前言",
        "shenhe_status": 2,
        "shenhe_house_introduction": "晨曦家园1栋1单元1楼101号",
        "shenhe_action_introduction": "业主正在申请：业主绑定",
        "shenhe_refuse_reason": null,
        "created_at": "2020年11月18日11:01:46",
        "updated_at": "2020年11月18日11:01:46"
    },
    "msg": "成功查询到该条审核数据",
    "message": "成功查询到该条审核数据"
}
```

``` json
2、错误访问返回
{
    "code": "1",
    "token_expired": "1",
    "msg": "服务器开小差，请重试",
    "message": "必须传递shenhe表的id值"
}
```

``` json
3、无权访问返回
{
    "code": "1",
    "token_expired": "1",
    "msg": "您没有权限管理该小区，请核对授权信息",
    "message": "该小区没有授权给该安防平台管理员权限，请联系万家灯火平台管理员（message编码Se160）"
}
```

# 2订单支付流程

## 2.1智慧平台提供接口

### 2.1.1 生成订单

>说明:传递可选凭证，如身份证、房间编号（如10002号小区1栋1单元1楼101）、手机号，生成订单，如果智慧平台找到该微信用户（通过任意凭证搜索），则返回订单编号

>请求方法：POST

>url:<https://tc.mg.cool/api/v1/order/new>

#### 2.1.1.1头部信息

> Authorization: Bearer token值

#### 2.1.1.2携带数据

字段|格式|是否必填|释义|补充
|:--|:--|:--|:--|:--
xiaoqu|integer|必填|小区唯一值（如晨曦家园10002）|判断钱是要交给哪家收费主体的重要凭依
type|string|必填|校验类型，详见[附录](#2-1-1-5-type)
identifier|json|必填|校验值,详见[附录](#2-1-1-5-type)
title|string|必填|收费名称|见附录[title类型](#2-1-1-5-title)
remark|string|否|补充说明|比如“2020年物业费征收”
extra|json|否|收费参数|使用{"参数1":"参数1值","参数2":"参数2值"}的格式，根据不同的type有不同的extra,如物业费说明{"每平米价格":"10"}，停车费的收费参数{"每半小时价格":30}
amount|float|必填|初始订单金额|单位是“元”
manager|string|选填|收费管理主体|如“XXXX物业公司”，当用户看订单时可以看到收费主体，如果没传递将以小区名字代替

#### 2.1.1.3返回数据

字段|必返|格式|释义|补充
|:--|:--|:--|:--|:--
code|integer|是|处理结果|见附录[code返回值](#2-1-1-5-code)
msg|string|是|描述|
message|string|是|调试信息
data|string|否|订单编号，用户缴费后，万家灯火平台将返回该订单编号的付款记录

#### 2.1.1.4返回示例

```json
成功
{
    "code": 0,
    "token_expired": 1,
    "msg": "订单创建成功",
    "data": "20201211114931367693",
    "message": "返回订单号"
}
```

```json
失败
{
    "code": 2,
    "token_expired": 1,
    "msg": "查无此人",
    "message": "没有通过phone查询到user表有人使用该手机号注册，或者，没有通过name+phone在people表中查到有人使用该手机号录入一标三实（message编码Order156）"
}
```

```json
失败
{
    "code": 2,
    "token_expired": 1,
    "msg": "查无此车",
    "message": "没有通过car_number查询到people_car表有人绑定该车辆"
}
```

#### 2.1.1.5接口附录

- <span id="2-1-1-5-title">title</span>

收费名称|补充
|:--|:--
物业费|
水费|
车位费|
临时停车费|
未完待续|

- <span id="2-1-1-5-type">type和identifier</span>

值|收费对象|identifier示例|补充
|:--|:--|:--|:--
house|针对房屋的收费|{"louhao":"1","danyuan":"1","louceng":"1","fangjian":"101"}|所有该房屋下的有权缴费者（业主授权）都会收到缴费通知
phone|针对个人的收费项目，详见补充内容|{"phone":"17600381130"}或{"name":"杨哲","phone":"17600381130"}|有两种传值模式：1、针对注册用户的收费项目，需要注册手机号和收费手机号相同;2、针对注册用户和居民的收费，需要注册手机号或一标三实录入手机号和收费手机号相同，并且还要提供机主姓名来确定居民个体
idcard|针对个人的收费项目|{"idcard":"130302199211302519"}|需要录入一标三实的身份证号和收费身份证号相同
car_number|针对车辆的收费项目|{"number":"GK12001"}|需要小程序绑定车牌号和收费车牌号相同（12月12日未开发）
parking_number|针对车位的收费项目|{"number":"A012"}|（12月12日未开发）

- <span id="2-1-1-5-code">code</span>

值|释义|补充
|:--|:--|:--
0|成功|
1|出错|
2|查无此人/车|1、如果是手机号未查到、身份证号未查到：手机号必须让用户使用该手机号注册成为小程序用户，若是针对居民的收费，则必须录入一标三实后，才能查到;身份证号必须录入一标三实后才能查到。2、如果是车辆未查到：必须让临时车辆在小程序上注册，扫描车牌，绑定车辆，才能交临时停车费。
3|用户未注册|已查到该用户，但该用户未注册小程序，请通知该用户进行激活

### 2.1.2 订单列表/查询订单

>说明:订单列表

>请求方法：POST

>url:<https://tc.mg.cool/api/v1/order/list>

#### 2.1.2.1头部信息

> Authorization: Bearer token值

#### 2.1.2.2携带数据

- 非必填项可任意交叉传递进行查询

字段|格式|是否必填|释义|补充
|:--|:--|:--|:--|:--
xiaoqu|integer|必填|小区唯一值（如晨曦家园10002）|判断钱是要交给哪家物业的重要凭依
louhao|integer|否|楼栋编号|在查询某个楼或者更下一层的数据时传递
danyuan|integer|否|单元编号|在查询某个单元或者更下一层的数据时传递，但必须传递louhao
louceng|integer|否|楼层编号|在查询某个楼层或者更下一层的数据时传递，但必须传递louhao+danyuan
fangjian|integer|否|房间编号|查询某个房间的数据时传递，但必须传递louhao+danyuan+louceng
idcard|string|否|身份证|查询某个人的数据时传递
phone|string|否|手机号|查询某个手机号拥有者的数据时传递
name|string|否|姓名|查询某个名字拥有者的数据时传递
title|string|否|收费名称|比如“物业费"
status|boolean|否|是否关闭|0已关闭1进行中
paied|boolean|否|是否付款|0未付款1已付款

#### 2.1.2.3返回数据

字段|必返|格式|释义|补充
|:--|:--|:--|:--|:--
code|integer|是|处理结果|
msg|string|是|描述|
message|string|是|调试信息
data|array|否|查询结果|
pages|array|是|分页数据

- data

字段|类型|是否必返|释义|选项
|:--|:--|:--|:--|:--
id|integer|必返|订单id|调用支付接口时使用
paied|boolean|必返|缴费状态|已付款/未付款
title|string|必返|订单名称
amount|float|必返|缴费金额|
status|string|必返|订单状态|进行中/已关闭
remark|string|否|订单备注
extra|json|否|订单明细
house|string|否|收费房屋对象（对个人的收费不会出现）

- pages

字段|名称|补充
|:--|:--|:--
current_page|当前页码|
from|本页开始是从第多少条记录为起点|
last_page|最后一页|
path|接口地址|
per_page|每页显示记录数量|
to|本页结束是从第多少条为终点|
total|总共有多少条记录

#### 2.1.2.4返回示例

```json
成功
{
    "code": 0,
    "token_expired": 1,
    "msg": "获取订单列表成功",
    "message": "获取订单列表成功",
    "data": [
        {
            "id": 4,
            "paied": "未付款",
            "shop_number": null,
            "number": "20201213104759976889",
            "title": "测试费2",
            "amount": "0.01元",
            "house": "晨曦家园1栋1单元1楼101号",
            "status": "进行中",
            "remark": "2020全年缴费",
            "extra": "{'单价':'100元/平方','最低缴费比例':'70%'}"
        },
        {
            "id": 3,
            "paied": "未付款",
            "shop_number": null,
            "number": "20201213104757994399",
            "title": "测试费2",
            "amount": "0.01元",
            "house": "晨曦家园1栋1单元1楼101号",
            "status": "进行中",
            "remark": null,
            "extra": null
        }
    ],
    "pages": {
        "current_page": 1,
        "first_page_url": "https://tc.mg.cool/api/v1/orders/list?page=1",
        "from": 1,
        "last_page": 2,
        "last_page_url": "https://tc.mg.cool/api/v1/orders/list?page=2",
        "next_page_url": "https://tc.mg.cool/api/v1/orders/list?page=2",
        "path": "https://tc.mg.cool/api/v1/orders/list",
        "per_page": 15,
        "prev_page_url": null,
        "to": 15,
        "total": 17
    }
}
```

```json
未查到
{
    "code": 0,
    "token_expired": 1,
    "msg": "获取订单列表成功",
    "message": "获取订单列表成功",
    "data": [],
    "pages": null
}
```

```json
报错
{
    "code": 1,
    "token_expired": 1,
    "msg": "获取订单列表成功",
    "message": "获取订单列表成功",
    "data": [],
    "pages": null
}
```

---
---
---

### 2.1.3 账单列表/账单查询（功能未开发12月13日）

---
---
---

## 2.2安防平台提供接口

### 2.2.1接收缴费信息返回

>说明:居民缴费后，智慧平台将通过该接口，返回给安防平台以下三条数据：1、第一次创建订单时返回的订单生成编号;2、微信交易单号;3、微信商户单号;

>请求方法：POST

>url:<需安防平台提供>

#### 2.2.2.1头部信息

> Content-Type: application/x-www-form-urlencoded

#### 2.3.2.2携带数据

- 非必填项可任意交叉传递进行查询

字段|格式|是否必填|释义|补充
|:--|:--|:--|:--|:--
order_number|integer|必填|订单生成编号|
shop_number|string|必填|商户单号|
weixin_number|integer|必填|微信单号|
token|string|必填|鉴权token|

#### 2.3.2.3返回数据

字段|必返|格式|释义|补充
|:--|:--|:--|:--|:--
code|integer|是|处理结果|0保存成功、1token失效、2保存失败

#### 2.3.2.4返回示例

```json
成功
{
    "code": 0,
}
```

---
---
---

# 3数据同步

## 3.1安防平台提供接口

### 3.1.1 小区功能模块状态同步

>说明:在智慧家园平台更新小区数据时，获得生产环境中小区模块的状态，如“晨熙家园”的“投诉建议”模块是关闭的

>请求方法：POST

>url:未提供

#### 3.1.1.1头部信息

> Content-Type: application/x-www-form-urlencoded

#### 3.1.1.2携带数据

字段|格式|是否必填|释义|补充
|:--|:--|:--|:--|:--
token|string|必填|鉴权token|

#### 3.1.1.3返回数据

字段|必返|格式|释义|补充
|:--|:--|:--|:--|:--
code|integer|是|处理结果|0成功1失败
data|string|是|小区模块状态

#### 3.1.1.4返回示例

```json
成功
{
    "code": 0,
    "data": '
    {"00001":{
        "绑定房屋":"1",
        "绑定家属":"1",
        "生活缴费":"1",
        "物业报修":"1",
        "云停车场":"1",
        "投诉建议":"1",
        "公告通知":"1",
        "应急电话":"1",
        "访客通行":"1"
    },
    "00002":{
        "绑定房屋":"1",
        "绑定家属":"1",
        "生活缴费":"1",
        "物业报修":"1",
        "云停车场":"1",
        "投诉建议":"1",
        "公告通知":"1",
        "应急电话":"1",
        "访客通行":"1"
    },
    "00003":{
        "绑定房屋":"1",
        "绑定家属":"1",
        "生活缴费":"1",
        "物业报修":"1",
        "云停车场":"1",
        "投诉建议":"1",
        "公告通知":"1",
        "应急电话":"1",
        "访客通行":"1"
    },
    "00004":{
        "绑定房屋":"1",
        "绑定家属":"1",
        "生活缴费":"1",
        "物业报修":"1",
        "云停车场":"1",
        "投诉建议":"1",
        "公告通知":"1",
        "应急电话":"1",
        "访客通行":"1"
        }
    }'
}
```

---
---
---

## 3.2智慧家园平台提供接口

### 3.2.1 小区功能模块状态列表

>说明:获得某小区功能模块列表，包括名称和状态

>请求方法：POST

>url:<https://tc.mg.cool/api/v1/wjdh/modules>

#### 3.2.1.1头部信息

> Authorization: Bearer token值

#### 3.2.1.2携带数据

字段|格式|是否必填|释义|补充
|:--|:--|:--|:--|:--
xiaoqu|string|必填|小区唯一标识|如晨熙家园00001

#### 3.2.1.3返回数据

字段|必返|格式|释义|补充
|:--|:--|:--|:--|:--
code|integer|是|处理结果|0成功1失败
data|string|是|小区模块状态列表

#### 3.2.1.4返回示例

```json
成功
{
    "code": 0,
    "token_expired": 1,
    "msg": "成功获取模块列表",
    "data": [
        {
            "id": 1,
            "community_identifier": "00001",
            "module_name": "绑定房屋",
            "module_status": 1
        },
        {
            "id": 2,
            "community_identifier": "00001",
            "module_name": "绑定家属",
            "module_status": 1
        },
        {
            "id": 3,
            "community_identifier": "00001",
            "module_name": "生活缴费",
            "module_status": 1
        },
        {
            "id": 4,
            "community_identifier": "00001",
            "module_name": "物业报修",
            "module_status": 1
        },
        {
            "id": 5,
            "community_identifier": "00001",
            "module_name": "云停车场",
            "module_status": 1
        },
        {
            "id": 6,
            "community_identifier": "00001",
            "module_name": "投诉建议",
            "module_status": 1
        },
        {
            "id": 7,
            "community_identifier": "00001",
            "module_name": "公告通知",
            "module_status": 1
        },
        {
            "id": 8,
            "community_identifier": "00001",
            "module_name": "应急电话",
            "module_status": 1
        },
        {
            "id": 9,
            "community_identifier": "00001",
            "module_name": "访客通行",
            "module_status": 1
        }
    ],
    "message": "message编码SecurityPlatformController518"
}
```

---

### 3.2.2 小区功能模块状态改变

>说明:改变某小区的某功能模块状态

>请求方法：PUT

>url:<https://tc.mg.cool/api/v1/wjdh/module>

#### 3.2.2.1头部信息

> Authorization: Bearer token值
> Content-Type: application/x-www-form-urlencoded

#### 3.2.2.2携带数据

字段|格式|是否必填|释义|补充
|:--|:--|:--|:--|:--
xiaoqu|string|必填|小区唯一标识|如晨熙家园00001
module_name|string|必填|模块名称|如"绑定房屋"
module_status|boolean|必填|模块状态|0关闭1开启

#### 3.2.2.3返回数据

字段|必返|格式|释义|补充
|:--|:--|:--|:--|:--
code|integer|是|处理结果|0成功1失败

#### 3.2.2.4返回示例

```json
成功
{
    "code": 0,
    "token_expired": 1,
    "msg": "模块状态更新成功",
    "message": "message编码SecurityPlatformController491"
}
```

# 4报修

## 4.1报修列表

>说明：获得该小区的报修列表

>请求方法：POST

>url:<https://tc.mg.cool/api/v1/wjdh/repair/list>

### 4.1.1头部信息

> Authorization: Bearer token值

### 4.1.2携带数据

字段|格式|是否必填|释义|补充
|:--|:--|:--|:--|:--
xiaoqu|string|必填|小区唯一标识|如晨熙家园00001
status|boolean|选填|是否开启|0未解决1已解决，默认是未解决
per_page|integer|选填|每页显示记录数量|默认20条
page|integer|选填|显示第几页|默认第1页

### 4.1.3返回数据

字段|必返|格式|释义|补充
|:--|:--|:--|:--|:--
code|integer|必返|处理结果|0成功1失败
data|integer|必返|见下

- repairs
  
字段|必返|格式|释义|补充
|:--|:--|:--|:--|:--
id|integer|必返|记录id|编辑报修内容时调用
possion|string|必返|报修地点
description|string|必返|报修描述
status|boolean|必返|报修记录状态
reply|string|必返|报修的物业反馈信息
name|string|必返|报修者姓名
phone|string|必返|报修者的电话

- pages

字段|名称|补充
|:--|:--|:--
current_page|当前页码|
from|本页开始是从第多少条记录为起点|
last_page|最后一页|
path|接口地址|
per_page|每页显示记录数量|
to|本页结束是从第多少条为终点|
total|总共有多少条记录

### 4.1.4返回示例

```json
成功
{
    "code": 0,
    "token_expired": 1,
    "msg": "成功查询返回报修列表",
    "data": {
        "repairs": [
            {
                "id": 1,
                "possion": "2位置位置位置位置",
                "description": "2描述描述描述",
                "status": 0,
                "reply": null,
                "name": "杨哲",
                "phone": "17610493577"
            },
            {
                "id": 2,
                "possion": "测试位置",
                "description": "测试描述",
                "status": 0,
                "reply": null,
                "name": "杨哲",
                "phone": "17610493577"
            }
        ],
        "pages": {
            "current_page": 1,
            "first_page_url": "http://wjdh-platform.test/api/v1/wjdh/repair/list?page=1",
            "from": 1,
            "last_page": 1,
            "last_page_url": "http://wjdh-platform.test/api/v1/wjdh/repair/list?page=1",
            "next_page_url": null,
            "path": "http://wjdh-platform.test/api/v1/wjdh/repair/list",
            "per_page": 15,
            "prev_page_url": null,
            "to": 3,
            "total": 3
        }
```

---

## 4.2查看单独某条报修记录

>说明：由repair的id调取单条记录

>请求方法：POST

>url:<https://tc.mg.cool/api/v1/repair>

### 4.2.1头部信息

> Authorization: Bearer token值

### 4.2.2携带数据

字段|格式|是否必填|释义|补充
|:--|:--|:--|:--|:--
id|integer|必填|报修记录id|

### 4.2.3返回数据

字段|必返|格式|释义|补充
|:--|:--|:--|:--|:--
code|integer|必返|处理结果|0成功1失败
data|json|必返|报修记录数据

- data

字段|必返|格式|释义|补充
|:--|:--|:--|:--|:--
id|integer|必返|记录id|
possion|string|必返|报修地点
description|string|必返|报修描述
status|boolean|必返|报修记录状态
reply|string|必返|报修答复
date|string|必返|报修日期
name|string|必返|报修人姓名
phone|string|必返|报修人电话

### 4.2.4返回示例

```json
成功
{
    "code": 0,
    "token_expired": 1,
    "msg": "成功获取报修记录",
    "data": {
        "id": 1,
        "possion": "2位置位置位置位置",
        "description": "2描述描述描述",
        "status": 0,
        "reply": "测试",
        "date": "2020年12月18日12:30:13",
        "name": "杨哲",
        "phone": "17610493577"
    },
    "message": "message编码Repairs121"
}
```

---
---
---

## 4.3更新报修状态

>说明：主要是将报修状态status字段从0“未处理”变为1“已处理”，还可以添加reply回复。

>请求方法：PUT

>url:<https://tc.mg.cool/api/v1/repair>

### 4.3.1头部信息

> Authorization: Bearer token值
> Content-Type: application/x-www-form-urlencoded

### 4.3.2携带数据

字段|格式|是否必填|释义|补充
|:--|:--|:--|:--|:--
id|integer|必填|报修记录id|
status|boolean|必填|报修记录状态|0未解决1已处理，默认是未处理
reply|string|选填|物业公司的回复|

### 4.3.3返回数据

字段|必返|格式|释义|补充
|:--|:--|:--|:--|:--
code|integer|必返|处理结果|0成功1失败

### 4.3.4返回示例

```json
成功
{
    "code": 0,
    "token_expired": 1,
    "msg": "修改成功",
    "message": "message编码Repairs123"
}
```

---
---
---

# 5公告

## 5.1创建公告

>说明:创建公告，可以在传递多张图片，

>请求方法：POST

>url:<https://tc.mg.cool/api/v1/announcement/new>

### 5.1.1头部信息

> Authorization: Bearer token值

### 5.1.2携带数据

字段|格式|是否必填|释义|补充
|:--|:--|:--|:--|:--
xiaoqu|string|必填|小区唯一标识|如晨熙家园00001
title|string|必填|公告标题|
content|text|必填|公告内容|
order|integer|选填|权重|默认是0,无权重，按照创建时间到序排列
top|boolean|选填|是否置顶|0不置顶1置顶，默认不置顶
status|boolean|选填|是否开启|0关闭1开启，默认开启
manager|string|选填|发布者|默认为“XXXX社区”+“物业”，如“晨曦家园物业”
logo|url|选填|发布者标志|默认为该社区标志
images|string|选填|图片|例如`http://xxx.jpg,http://xxx.png,http://xxx.png`

### 5.1.3返回数据

字段|必返|格式|释义|补充
|:--|:--|:--|:--|:--
code|integer|必返|处理结果|0成功1失败
data|integer|必返|公告id

### 5.1.4返回示例

```json
成功
{
    "code": 0,
    "token_expired": 1,
    "msg": "公告发布成功",
    "data":4,
    "message": "message编码Announcements75"
}
```

---
---
---

# 6投诉建议